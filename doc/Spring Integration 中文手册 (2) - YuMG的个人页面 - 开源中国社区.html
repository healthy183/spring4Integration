<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0038)http://my.oschina.net/yumg/blog/390486 -->
<html lang="zh-CN" xml:lang="zh-CN" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>
  
  <meta http-equiv="Content-Language" content="zh-CN">
  <meta name="robots" content="index, follow">
  <link rel="shortcut icon" type="image/x-icon" href="http://my.oschina.net/img/favicon.ico?t=1451964198000">
  <title>Spring Integration 中文手册 (2)  -  YuMG的个人页面 - 开源中国社区</title>
    <meta name="Keywords" content="SpringIntegration,企业应用集成,EAI,教程,手册">
      <meta name="Description" content="Spring Integration 中文手册 (2) ：**原创翻译，版权所有 © YuMG** * * * *本章节部分将涵盖Spring Integration中核心消息API的所有方面。...">
    <link rel="stylesheet/less" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/styles.less" type="text/css" media="screen">
  <link rel="stylesheet" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/tip-yellowsimple.css" type="text/css">
  <link rel="stylesheet" type="text/css" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/jquery.fancybox-1.3.4.css" media="screen">
	<!--添加emoji支持-->
    <link rel="stylesheet" type="text/css" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/nature.css">
    <link rel="stylesheet" type="text/css" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/object.css">
    <link rel="stylesheet" type="text/css" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/people.css">
    <link rel="stylesheet" type="text/css" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/place.css">
    <link rel="stylesheet" type="text/css" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/Sysmbols.css">
    <link rel="stylesheet" type="text/css" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/twemoji.css">

  <script src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/ca-pub-1307862221338762.js"></script><script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/jquery-1.7.1.min.js"></script>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/jquery.form.js"></script>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/jquery.fancybox-1.3.4.pack.js"></script>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/jquery.poshytip.min.js"></script>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/oschina.js"></script>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/less-1.3.0.min.js"></script><style type="text/css" media="screen" id="less:yumg-styles">:focus {
  outline: 0;
}
* {
  padding: 0;
  margin: 0;
}
a {
  color: #0072bb;
  outline: 0;
}
a:hover {
  color: #0000aa;
}
ul,
ol {
  list-style-type: none;
}
img {
  border: 0;
}
textarea {
  resize: none;
}
body {
  background: #f9f9f9;
  text-align: center;
  font-size: 10pt;
}
label.SELECTED {
  color: #A00;
  font-weight: bold;
}
.clear {
  clear: both;
  font-size: 1px;
  line-height: 0;
}
.clearfix:after {
  content: ".";
  display: block;
  clear: both;
  visibility: hidden;
  line-height: 0;
  height: 0;
}
.clearfix {
  display: inline-block;
}
html[xmlns] .clearfix {
  display: block;
}
* html .clearfix {
  height: 1%;
}
.ostable {
  width: 100%;
  table-layout: fixed;
}
.ostable td {
  vertical-align: top;
  overflow: hidden;
}
.highlight {
  color: #A00;
  padding: 0 1px;
  margin: 0 2px;
}
.NoData {
  text-align: center;
  padding: 20px 0;
  color: #999999;
}
a.tag {
  background-color: #E0EAF1;
  border-bottom: 1px solid #3E6D8E;
  border-right: 1px solid #7F9FB6;
  color: #3E6D8E;
  font-size: 8pt;
  line-height: 2.4;
  margin: 2px 2px 2px 0;
  padding: 2px 4px;
  text-decoration: none;
  white-space: nowrap;
}
a.tag:hover {
  background-color: #3E6D8E;
  color: #fff;
}
a.project {
  background-color: #cfc;
  color: #060;
}
a.project:hover {
  background-color: #0072bb;
  color: #fff;
}
a.rndbutton {
  background: #0072bb;
  color: #fff;
  text-decoration: none;
  height: 30px;
  float: left;
  margin: 0;
  border: 0px solid #000;
  font-weight: bold;
  cursor: pointer;
}
a.rndbutton:hover {
  background: #005388;
}
a.rndbutton:hover span {
  background: #005388;
  color: #fff;
}
a.rndbutton span {
  background: #0072bb;
  color: #fff;
  float: left;
  margin: 0 0 0 12px;
  padding: 0 12px 0 0;
  height: 30px;
  line-height: 30px;
}
.obj_type_1 a.title {
  background: url('/img/a2.gif') no-repeat left center;
  background-position: 5px;
}
.obj_type_2 a.title {
  background: url('/img/thread.gif') no-repeat left center;
  background-position: 5px;
}
.obj_type_3 a.title {
  background: url('/img/thread.gif') no-repeat left center;
  background-position: 5px;
}
.obj_type_4 a.title {
  background: url('/img/a3.gif') no-repeat left center;
  background-position: 5px;
}
.obj_type_5 a.title {
  background: url('/img/code.gif') no-repeat left center;
}
.obj_type_7 a.title {
  background: url('/img/a3.gif') no-repeat left center;
  background-position: 5px;
}
.obj_type_36 a.title {
  background: url('/img/a2.gif') no-repeat left center;
  background-position: 5px;
}
.init_degree {
  -webkit-transform: rotate(0deg);
  -moz-transform: rotate(0deg);
  -o-transform: rotate(0deg);
  -ms-transform: rotate(0deg);
  -webkit-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
}
.first_degree {
  -webkit-transform: rotate(-90deg) translate(-100%);
  -moz-transform: rotate(-90deg) translate(-100%);
  -o-transform: rotate(-90deg) translate(-100%);
  -ms-transform: rotate(-90deg) translate(-100%);
  -webkit-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
}
.second_degree {
  -webkit-transform: rotate(-180deg) translate(-100%, -100%);
  -moz-transform: rotate(-180deg) translate(-100%, -100%);
  -o-transform: rotate(-180deg) translate(-100%, -100%);
  -ms-transform: rotate(-180deg) translate(-100%, -100%);
  -webkit-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
}
.third_degree {
  -webkit-transform: rotate(-270deg) translate(0, -100%);
  -moz-transform: rotate(-270deg) translate(0, -100%);
  -o-transform: rotate(-270deg) translate(0, -100%);
  -ms-transform: rotate(-270deg) translate(0, -100%);
  -webkit-transform-origin: 0 0;
  -moz-transform-origin: 0 0;
  -o-transform-origin: 0 0;
  -ms-transform-origin: 0 0;
}
#OSC_Screen {
  width: 990px;
  margin: 0px auto;
  text-align: left;
  padding: 0 4px;
  margin-bottom: 50px;
}
#OSC_Banner {
  background: #666666;
  border-top: 0;
  height: 36px;
  padding: 2px 5px 0 5px;
}
#OSC_Banner #OSC_Logo {
  float: left;
  margin: 1px 0 0 2px;
  width: 105px;
}
#OSC_Banner #OSC_Logo a {
  float: left;
  background: url('/img/2012/osc2.png') no-repeat 0 1px;
  width: 100px;
  height: 34px;
  text-indent: -9999px;
}
#OSC_Banner #OSC_Slogon {
  float: left;
  margin: 10px 0 0 10px;
  color: #f2f2f2;
}
#OSC_Banner #OSC_Slogon a {
  color: #fff;
}
#OSC_Banner #OSC_Channels {
  margin-right: 10px;
  float: right;
  font-weight: bold;
  font-size: 10.5pt;
  height: 35px;
  line-height: 35px;
}
#OSC_Banner #OSC_Channels ul li {
  float: left;
  margin: 0px 5px 0 10px;
}
#OSC_Banner #OSC_Channels ul li a {
  text-decoration: none;
  color: #f2f2f2;
  padding: 2px;
}
#OSC_Banner #OSC_Channels ul li a:hover {
  color: #fff;
}
#OSC_Notification {
  width: 200px;
  margin-left: 10px;
  font-size: 9pt;
}
#OSC_Notification a.msgbox {
  background: url('/img/msg.gif') no-repeat 5px 5px;
  padding: 2px 4px 2px 22px;
  text-decoration: none;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
}
#OSC_Notification a.newmsg {
  color: #A00;
  background: url('/img/msg2.gif') no-repeat 5px 3px;
  padding: 2px 4px 2px 22px;
  text-decoration: none;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
}
#OSC_Notification a:hover {
  font-weight: bold;
  color: #C00;
}
#OSC_Notification a em {
  font-style: normal;
  font-weight: bold;
  margin-right: 2px;
  text-decoration: underline;
}
#OSC_Topbar {
  margin: 2px 0;
}
#OSC_Topbar #VisitorInfo {
  font-size: 9pt;
  color: #888;
  float: left;
}
#OSC_Topbar #VisitorInfo a {
  text-decoration: none;
}
#OSC_Topbar #SearchBar form {
  float: right;
  margin: 3px 0 0 0;
  width: 310px;
  background: #eee;
  padding: 1px;
  font-size: 0;
}
#OSC_Topbar #SearchBar form .ipt {
  display: inline-block;
  vertical-align: top;
  height: 22px;
  padding: 2px 0 0 5px;
  background: #FFF;
}
#OSC_Topbar #SearchBar form .ipt input {
  color: #868686;
  width: 200px;
  border: none;
  background: #FFF;
  padding: 0;
  height: 20px;
  outline: 0;
}
#OSC_Topbar #SearchBar form .bnt {
  color: #FFF;
  text-align: center;
  background: #0072bb;
  width: 45px;
  height: 24px;
  border: 0;
  cursor: pointer;
}
#OSC_Topbar #SearchBar form .bnt:hover {
  background: #005388;
}
#OSC_Topbar #SearchBar form .search-by {
  display: inline-block;
  vertical-align: top;
  font-size: 10pt;
}
#OSC_Topbar #SearchBar form .search_on {
  background: #FFF;
  text-align: center;
  position: relative;
}
#OSC_Topbar #SearchBar form .search_on .text {
  height: 24px;
  line-height: 23px;
  width: 50px;
  display: block;
  color: #868686;
  cursor: pointer ;
  text-align: left;
  padding: 0px 0 0 10px;
  background: url(/img/android/selectbox_bg.png) no-repeat;
}
#OSC_Topbar #SearchBar form .search_on .text.on {
  background-position: 0 -24px;
}
#OSC_Topbar #SearchBar form .search_on .text.hover {
  background-position: 0 -48px;
}
#OSC_Topbar #SearchBar form .search_list {
  background: #FFF;
  display: none;
  position: absolute;
  width: 80px;
  border: 1px solid #c3c3c3;
  z-index: 9999;
}
#OSC_Topbar #SearchBar form .search_list li {
  width: 80px;
  height: 24px;
  line-height: 24px;
}
#OSC_Topbar #SearchBar form .search_list a {
  display: block;
  color: #333 !important;
  font-size: 8pt !important;
  text-decoration: none;
  padding: 0 0 0 10px;
}
#OSC_Topbar #SearchBar form .search_list a:hover {
  background: #3399ff;
  color: #ffffff !important;
}
#OSC_Topbar #SearchBar form .f_r {
  display: inline-block;
  vertical-align: top;
}
#OSC_Topbar #SearchBar form .f_l {
  float: left;
}
#OSC_Topbar #SearchBar form .last {
  margin: 0 !important;
}
#OSC_Topbar #SearchBar form .hide {
  display: none;
}
/* 底部版权 */
#OSC_Footer {
  margin-top: 20px;
  padding-bottom: 50px;
  height: 38px;
  line-height: 38px;
  border-top: 2px solid #cccccc;
  color: #666666;
  text-align: center;
}
#OSC_Content {
  margin: 10px 2px;
  position: relative;
}
#SpaceLeft {
  float: left;
  width: 220px;
}
#SpaceLeft a {
  text-decoration: none;
}
#SpaceMain {
  margin: 0 220px 0 230px;
  word-wrap: break-word;
}
#SpaceRight {
  position: absolute;
  right: 0;
  top: 0;
  width: 210px;
  word-wrap: break-word;
}
.SpaceList {
  margin: 0 0 0 230px;
  border: 1px solid #eee;
  padding: 10px 15px;
  background: #fff;
  word-wrap: break-word;
}
.SpaceList .TopBar {
  margin: 0 0 25px 0;
  color: #999999;
  font-size: 9pt;
  height: 22px;
  line-height: 22px;
}
.SpaceList .TopBar h1 {
  color: #333333;
}
.Owner {
  background: #0072bb;
  padding: 15px 5px 15px 10px;
  position: relative;
}
.Owner a.Img:hover {
  background: none;
}
.Owner a {
  color: #fff;
  padding: 0px;
}
.Owner a:hover {
  background: #fff;
  color: #0072bb;
}
.Owner a.ThemeSetting {
  position: absolute;
  right: 0;
  top: 0;
  text-indent: -9999px;
  width: 28px;
  height: 28px;
  background: url('/img/2012/enter_narrow.png') no-repeat 0 0;
}
.Owner a.ThemeSetting:hover {
  background: url('/img/2012/enter_narrow.png') no-repeat 0 -30px;
}
.Owner .Img img {
  float: left;
  width: 56px;
  height: 56px;
  background: #fff;
  padding: 3px;
  margin: 0 8px 10px 0;
}
.Owner .Img:hover img {
  background: #eee;
}
.Owner span.U {
  float: left;
  width: 130px;
}
.Owner span.U .Name {
  color: #FFF;
  font-size: 14pt;
  display: block;
  margin: 0 0 12px 0;
  font-weight: bold;
  word-wrap: break-word;
}
.Owner span.U .Name {
  background: none;
}
.Owner span.U .opts {
  color: #fff;
  font-size: 9pt;
}
.Owner span.U .opts a {
  color: #fff;
}
.Owner span.U .opts a:hover {
  background-color: #fff;
  color: #0072bb;
}
.Owner a#gender_icon {
  text-indent: -9999px;
  background-color: #0072bb;
}
.Owner a#gender_icon:hover {
  background-color: #0072bb;
}
.Owner .stat {
  color: #fff;
  font-size: 9pt;
}
.Owner .stat a {
  margin-right: 3px;
}
.Owner .stat a span {
  font-size: 9pt;
}
.Resume {
  background: #cd4900 url('/img/2012/resume24.png') no-repeat left bottom;
  margin: 3px 0 0 0;
  color: #fff;
  padding: 18px 10px 18px 40px;
  word-wrap: break-word;
  overflow: hidden;
}
.Resume textarea {
  width: 170px;
  height: 60px;
  font-size: 9pt;
}
/*勋章*/
.Medals {
  background-color: #0072bb;
  margin-top: 3px;
  padding: 5px;
}
.Opts {
  margin: 3px 0 0 0;
}
.Opts a {
  cursor: pointer;
  float: left;
  width: 108px;
  height: 108px;
}
.Opts a.a1 {
  background-color: #008641;
}
.Opts a.a1:hover {
  background-color: #005328;
}
.Opts a.a2 {
  background-color: #662e91;
}
.Opts a.a2:hover {
  background-color: #4b226a;
}
.Opts a.a3 {
  margin-top: 3px;
  width: 220px;
  height: 60px;
  background-color: #cd4900;
}
.Opts a.a3:hover {
  background-color: #9a3700;
}
.Opts a span {
  padding: 82px 0 0 10px;
  font-size: 11pt;
  color: #fff;
}
.Opts a.a3 span {
  display: block;
  padding: 15px 0 0 60px;
  font-size: 18pt;
}
.Opts a i {
  text-indent: -9999px;
  display: block;
  margin: 10px 0 0 20px;
  width: 67px;
  height: 67px;
  background-image: url('/img/2012/space-opts.png');
  background-repeat: no;
}
.Opts a.a2 {
  margin-left: 4px;
}
.Opts a.blog i {
  background-position: 0 -67px;
}
.Opts a.admin i {
  background-position: 0 -201px;
}
.Opts a.sendmsg i {
  background-position: 0 -134px;
}
.Opts a.ask i {
  background-position: 0 0;
}
.Mod {
  background: #EAEAEA;
  margin: 3px 0 0 0;
  padding: 5px 0;
  color: #666666;
  overflow: hidden;
}
.Mod strong {
  display: block;
  font-size: 12pt;
  border-bottom: 2px solid #cd4900;
  padding: 0 10px 5px 10px;
  color: #666666;
}
.Mod strong .more {
  float: right;
  font-weight: normal;
  font-size: 10pt;
  margin: 3px 0 0 0;
}
.Mod ul,
.Mod ol {
  margin: 10px;
  line-height: 24px;
}
.Users ul li {
  float: left;
}
.Users ul li a {
  margin: 1px 1px 0 0;
}
.Users ul li img {
  width: 36px;
  height: 36px;
  border: 1px solid #EAEAEA;
}
.Users ul li a:hover img {
  border: 1px solid #0072bb;
}
.Users .more {
  margin: 10px 0;
  text-align: right;
  padding: 0 5px 0 0 ;
}
#BlogCatalogs ul li a {
  background: url('/img/fw_arrow.gif') no-repeat left center;
  padding-left: 15px;
  color: #333333;
}
#BlogCatalogs ul li a:hover {
  color: #000;
}
#BlogCatalogs ul li span {
  color: #666666;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
  margin-left: 5px;
}
#BlogCatalogs ul li.draft a {
  font-weight: bold;
}
#HotBlogs ol li a {
  color: #333333;
  display: block;
}
#HotBlogs ol li a:hover {
  color: #000;
  background: #ddd;
}
#BlogLinks li a {
  color: #333333;
  display: block;
}
#BlogLinks li a:hover {
  color: #000;
  background: #ddd;
}
#RelativeBlogs {
  position: fixed;
  bottom: 0;
  right: -400px;
  width: 380px;
  height: 160px;
  background-color: #FFFFFF;
  font-size: 10.5pt;
  border: 1px solid #0072bb;
}
#RelativeBlogs strong {
  display: block;
  margin: 0 0 10px 0;
  background: #0072bb;
  color: #fff;
  padding: 2px 5px;
}
#RelativeBlogs strong a#btn_close {
  cursor: pointer;
  float: right;
  color: #fff;
  font-size: 9pt;
}
#RelativeBlogs ul {
  margin: 10px;
}
#RelativeBlogs ul li {
  line-height: 22px;
}
#RelativeBlogs ul li a {
  background: url('/img/a2.gif') no-repeat left center;
  padding-left: 15px;
  font-size: 10pt;
  text-decoration: none;
}
#RelativeBlogs ul li .date {
  float: right;
  font-size: 8pt;
  color: #666666;
  -webkit-text-size-adjust: none;
}
#BlogReplies ul li {
  color: #666666;
  border-bottom: 1px dashed #999999;
}
.TopBar .NavPath {
  float: left;
}
.TopBar .PreviewMod {
  float: right;
}
.TopBar .PreviewMod a.active {
  font-weight: bold;
  color: #4466BB;
}
.TopBar .PreviewMod a {
  color: #666666;
}
.BlogList .Blog {
  margin: 0 0 15px 0;
  border-bottom: 1px solid #eee;
  padding-bottom: 5px;
  position: relative;
}
.BlogList .Blog .date {
  position: absolute;
  right: 0;
  top: 5px;
  background: #cd4900;
  font-size: 8pt;
  color: #fff;
  -webkit-text-size-adjust: none;
  text-align: center;
  padding: 2px 3px;
}
.BlogList .Blog .date em {
  font-style: normal;
  font-family: Calibri;
  font-size: 16pt;
  display: block;
  font-weight: bold;
}
.BlogList .Blog .title {
  margin-right: 80px;
}
.BlogList .Blog h2 {
  font-size: 12pt;
  margin: 0 0 5px 0;
}
.BlogList .Blog h2.BlogAccess_false {
  background: url('/img/lock.gif') no-repeat 3px center;
  padding-left: 20px;
}
.BlogList .Blog h2.BlogTop_1 {
  background: url('/img/top.gif') no-repeat left center;
  padding-left: 22px;
}
.BlogList .Blog h2.BlogSong {
  background: url('/img/song.gif') no-repeat left center;
  padding-left: 22px;
}
.BlogList .Blog h2 a {
  text-decoration: none;
  color: #333333;
}
.BlogList .Blog .outline {
  color: #666666;
  font-size: 9pt;
}
.BlogList .Blog .bottom {
  margin: 15px 0 8px 0;
  color: #666666;
  font-size: 9pt;
}
.BlogList .Blog .bottom a.fullcontent {
  margin-left: 10px;
}
.BlogList .Blog .TextContent {
  margin: 15px 0 0 0px;
  color: #666666;
  line-height: 22px;
  overflow: hidden;
  letter-spacing: 1px;
}
.BlogList .Blog a {
  color: #666666;
}
.BlogList .Blog a:hover {
  color: #333333;
}
.BlogList .Blog .catalog {
  display: inline-block;
  position: relative;
  padding: 0px;
  margin: 0px;
  vertical-align: middle;
}
.BlogList .Blog .catalog ul {
  position: absolute;
  top: 18px;
  left: 27px;
  width: 120px;
  background: #0072bb;
  z-index: 1000;
  overflow: hidden;
  border: 1px solid #F1F1F1;
  padding: 3px;
  display: none;
  vertical-align: middle;
  color: #FFF;
}
.BlogList .Blog .catalog ul li {
  line-height: 20px;
  text-indent: 5px;
  cursor: pointer;
  vertical-align: middle;
}
.BlogList .Blog .catalog ul li img {
  cursor: pointer;
  vertical-align: middle;
  float: right;
  margin-right: 5px;
  display: none;
}
.BlogList .Blog .catalog ul li:hover img {
  display: block;
}
.BlogList .Blog .setting {
  margin-left: 4px;
  vertical-align: middle;
  cursor: pointer;
  border: 1px solid #FFF;
}
.BlogList .Blog .setting:hover {
  border: 1px solid #F3F3F3;
}
.BlogTitle {
  padding: 5px 70px 5px 0px;
  margin: 0 0 10px 0;
  border-bottom: 2px solid #0072bb;
  position: relative;
}
.BlogTitle h1 {
  font-size: 22px;
  margin: 0 0 10px 0;
  color: #000;
  font-weight: normal;
}
.BlogTitle .BlogStat {
  color: #666666;
}
.BlogTitle .BlogStat strong {
  margin: 0 2px;
  color: #A00;
}
.BlogTitle .BlogStat a {
  color: #A00;
  text-decoration: none;
}
.BlogTitle .BlogStat a:hover {
  color: #F00;
}
.BlogTitle .BlogStat .admin em {
  font-style: normal;
  font-weight: bold;
  color: #A00;
  margin: 0 2px;
}
.BlogTitle .tvote {
  height: 55px;
  width: 50px;
  display: inline-block;
  position: absolute;
  right: 0px;
  bottom: 5px;
}
.BlogTitle .tvote .num,
.BlogTitle .tvote .vote {
  display: inline-block;
  width: 50px;
  text-align: center;
  font-style: normal;
  color: #FFF;
  background: #662e91;
  cursor: pointer;
}
.BlogTitle .tvote .num:hover,
.BlogTitle .tvote .vote:hover {
  background-color: #5b2982;
}
.BlogTitle .tvote .num {
  height: 20px;
  line-height: 20px;
  font-size: 12px;
}
.BlogTitle .tvote .vote {
  height: 35px;
  line-height: 35px;
  font-size: 20px;
}
.BlogContent {
  font-size: 12.5px;
  overflow: hidden;
}
.BlogContent p {
  margin-bottom: 15pt;
  line-height: 1.5;
  letter-spacing: 1px;
}
.BlogContent pre {
  line-height: 18px;
  font-size: 9pt;
  font-family: Courier New,Arial;
  border: 1px solid #ddd;
  background: #f6f6f6;
  padding: 5px;
}
.BlogAnchor {
  background: #f4f7f9;
  padding: 10px;
}
.BlogAnchor p {
  font-size: 12px;
}
.BlogAnchor .AnchorContent {
  padding: 5px 0px;
}
.BlogAnchor li {
  list-style: none;
  padding: 1px 0;
}
.BlogAnchor a {
  text-decoration: none;
}
.BlogAnchor a:hover {
  color: #0072bb;
}
.BlogAnchor .osc_h1 {
  text-indent: 20px;
  font-size: 14px;
}
.BlogAnchor .osc_h2 {
  text-indent: 35px;
  font-size: 13px;
}
.BlogAnchor .osc_h3 {
  text-indent: 50px;
  font-size: 12px;
}
.BlogAnchor .osc_h4 {
  text-indent: 65px;
  font-size: 11px;
}
.BlogAnchor .osc_h5 {
  text-indent: 80px;
  font-size: 10px;
}
.BlogAnchor .osc_h6 {
  text-indent: 95px;
  font-size: 9px;
}
/*   happysha 2013-07-07   */
.BlogContent {
  color: #333;
  padding: 10px;
}
.BlogAbstracts {
  padding: 10px;
  background: #f4f7f9;
  font-size: 12px;
}
.BlogAbstracts strong {
  font-size: 15px;
  color: #15a230;
  font-weight: normal;
}
.BlogAbstracts span {
  font-size: 12.5px;
  letter-spacing: 0.7px;
}
em.corner {
  font-size: 13px;
  font-weight: normal;
  color: #FFF;
  display: inline-block;
  line-height: 20px;
  background: #0072bb;
  font-style: normal;
  padding: 1px 8px;
  margin-right: 10px;
}
.BlogAnchor p {
  font-size: 18px;
  color: #15a230;
}
.BlogAnchor p strong {
  font-weight: normal;
  font-size: 14px;
}
.BlogContent,
.BlogAbstracts,
.BlogAnchor {
  line-height: 180%;
}
.BlogContent h1,
.BlogContent h2,
.BlogContent h3,
.BlogContent h4,
.BlogContent h5,
.BlogContent h6,
.BlogContent p,
.BlogContent ol,
.BlogContent ul {
  line-height: 180%;
}
.BlogContent h1,
.BlogContent h2,
.BlogContent h3,
.BlogContent h4,
.BlogContent h5,
.BlogContent h6 {
  font-weight: 600;
}
.BlogContent h1 {
  font-size: 24px;
  margin: 20px 0 10px 0;
}
.BlogContent h2 {
  font-size: 20px;
  margin: 20px 0 10px 0;
}
.BlogContent h3 {
  font-size: 16px;
  margin: 15px 0 10px 0;
}
.BlogContent h4 {
  font-size: 14px;
  margin: 10px 0;
}
.BlogContent h5 {
  font-size: 12px;
  margin: 10px 0;
}
.BlogContent h6 {
  font-size: 12px;
  margin: 10px 0;
}
.BlogContent p {
  font-size: 12.5px;
  margin: 8px 0;
  letter-spacing: 0.5px;
  white-space: normal;
  -ms-word-wrap: break-word;
  word-wrap: break-word;
  -ms-word-break: break-all;
  word-break: break-all;
}
.BlogContent ol,
.BlogContent ul {
  margin: 10px 20px;
}
.BlogContent img {
  max-width: 640px;
  background: #f4f7f9;
  border: 1px solid #ddd;
  margin: 10px 0;
}
.BlogContent blockquote:before,
.BlogContent blockquote:after,
.BlogContent q:before,
.BlogContent q:after {
  content: "";
  font-size: 24px;
  color: #0F6575;
  font-family: Helvetica, arial, '宋体';
  position: absolute;
}
.BlogContent blockquote:before {
  content: "“";
  top: 5px;
  left: 10px;
}
.BlogContent blockquote:after {
  content: "”";
  bottom: -5px;
  right: 15px;
}
.BlogContent q,
.BlogContent blockquote {
  position: relative;
  background: #F4FDFD;
  text-align: left;
  margin: 20px 10px;
  padding: 3px 25px 3px 25px;
  color: #333;
  font-size: 10pt;
  line-height: 22px;
  border-left: 3px solid #A4DAF0;
}
.BlogContent blockquote i,
.BlogContent q i {
  font-style: normal;
  font-size: 12px;
}
.BlogContent b {
  font-style: normal;
  font-weight: 600;
}
.BlogContent > table {
  border-collapse: collapse;
  border-spacing: 1px;
  border: 1px solid #F8F8F8;
  font-size: 12px;
  color: #444;
}
.BlogContent > table th,
.BlogContent > table td {
  padding: 0 2px;
}
.BlogContent > table th {
  font-weight: 500;
  background: #f3f3f3;
}
.BlogContent > table th,
.BlogContent > table td {
  border: 1px solid #F8F8F8;
  padding: 1px 2px;
}
.BlogContent a {
  color: #FF8373;
  font-size: 12px;
}
.BlogContent ul,
ol {
  margin: 0 0 10px 20px;
}
.BlogContent ul {
  list-style-type: disc;
}
.BlogContent ol {
  list-style-type: decimal;
}
.BlogContent code {
  font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', 'Courier', 'monospace !important';
  color: red;
}
.BlogContent pre code {
  margin: 0 2px;
  padding: 1px 3px;
  border-radius: 3px;
  white-space: pre-wrap;
  -ms-word-wrap: break-word;
  word-wrap: break-word;
  -ms-word-break: break-all;
  word-break: break-all;
  padding: 8px 5px;
}
.BlogShare {
  padding: 8px 0px;
  border: 1px solid #DDD;
  margin: 20px 0px;
  line-height: 30px;
}
.BlogShare a {
  text-decoration: none;
}
.BlogShare strong {
  margin-left: 15px;
  line-height: 30px;
  vertical-align: middle;
}
.BlogShare .share_sina img,
.BlogShare .share_qq img {
  vertical-align: middle;
  margin: 3px 8px;
}
.BlogShare .BlogVote {
  height: 30px;
  background: #0072bb;
  display: inline-block;
  float: right;
  padding: 3px 8px;
  line-height: 30px;
  color: #FFF;
  margin-right: 5px;
}
.BlogShare .BlogVote:hover {
  background-color: #0066a7;
}
.BlogShare .BlogVote .num {
  padding: 0px 3px;
  cursor: pointer;
  font-size: 12px;
}
.BlogShare .BlogVote .vote {
  padding: 0px 3px;
  font-size: 18px;
  cursor: pointer;
}
/*   happysha 2013-07-07   */
.BlogLinks {
  margin: 10px 0 20px 0;
}
.BlogLinks ul {
  list-style-type: none;
  font-weight: bold;
  height: 24px;
}
.BlogLinks ul li.prev {
  float: left;
  width: 48%;
}
.BlogLinks ul li.next {
  float: right;
  width: 48%;
  text-align: right;
}
.BlogCopyright {
  color: #666666;
  margin: 20px 0;
  border: 1px solid #ddd;
  background: #ffe;
  padding: 5px 15px;
  font-size: 12px;
}
.BlogCopyright a {
  color: #666666;
  text-decoration: none;
}
.BlogComments h2 {
  font-size: 18px;
  color: #444;
  font-weight: 600;
  padding: 5px 0px;
  border-bottom: 1px solid #ccc;
}
.BlogComments h2 em {
  font-size: 12px;
  padding: 0px 5px;
  font-style: normal;
  color: #0072bb;
}
.BlogComments h2 a {
  float: right;
  font-weight: normal;
  font-size: 10pt;
}
.BlogComments ul {
  margin: 10px 0 10px 0;
}
.BlogComments ul li {
  margin: 0 0 10px 0;
  padding: 5px 0px;
}
.BlogComments ul li.even {
  background: #F6F6F6;
}
.BlogComments ul li .portrait {
  width: 65px;
  padding-top: 3px;
}
.BlogComments ul li .portrait img {
  width: 40px;
  height: 40px;
  padding: 2px;
  background: #fff;
  border: 1px solid #F1F1F1;
}
.BlogComments ul li .body .title {
  color: #666666;
  font-size: 9pt;
}
.BlogComments ul li .body .title a.user {
  text-decoration: none;
  color: #666666;
  font-weight: bold;
}
.BlogComments ul li .body .post {
  margin: 8px 0 0 0;
  color: #00A;
  font-size: 12px;
}
.BlogComments ul li .body .post div.ref {
  border: 1px solid #999;
  color: #333;
  margin: 0 0 10px 0;
  padding: 3px;
  background: #ffe;
  font-size: 9pt;
}
.BlogComments ul li .body .post div.ref h4 {
  margin: 0;
  padding: 2px 0px 3px 0px;
  color: #1E50A2;
  font-weight: normal;
  font-size: 10pt;
}
.BlogComments ul li .body .post div.ref p {
  margin: 0;
  padding: 2px;
  line-height: 20px;
  color: color: #333;
  font-size: 9pt;
}
.BlogComments ul li .body .post img {
  width: 20px;
  vertical-align: middle;
  margin: 0px 2px;
}
.BlogComments .inline_reply {
  margin-top: 10px;
}
.BlogCommentForm {
  width: 650px;
}
.BlogCommentForm .comment_form {
  padding-left: 70px;
  width: 650px;
}
.blg_submit_btn {
  padding: 5px 10px;
  text-decoration: none;
  background: #0072bb;
  font-size: 12px;
  color: #FFF;
  display: inline-block;
  border: none;
  font-family: '微软雅黑';
  cursor: pointer;
}
.blg_submit_btn:hover {
  background-color: #0066a7;
}
.BlogCommentForm .comment_portrait {
  float: left;
  margin-left: 10px;
}
.BlogCommentForm .comment_portrait img {
  width: 40px;
  height: 40px;
  padding: 2px;
  border: #eee 1px solid;
}
.BlogCommentForm p {
  margin: 5px 0px;
  font-size: 12px;
}
.BlogCommentForm a.blog_emotion,
.BlogCommentForm a.blog_soft {
  text-decoration: none;
  padding: 1px 2px 1px 18px;
  color: #666;
  border: 1px #FFF solid;
}
.BlogCommentForm a.blog_emotion:hover,
.BlogCommentForm a.blog_soft:hover {
  border: 1px #F00 solid;
}
.BlogCommentForm a.blog_emotion {
  background: url('/img/space/emotion.gif') no-repeat left center;
}
.BlogCommentForm a.blog_soft {
  background: url('/img/space/app.gif') no-repeat left center;
}
.LMod {
  border: 1px solid #eee;
  background: #fff;
  padding: 10px 10px 5px 10px;
  overflow: hidden;
}
.LMod strong {
  display: block;
  font-size: 12pt;
  padding: 0 10px;
  color: #666666;
}
.LMod ul {
  margin: 15px 0 0 0;
}
.LMod ul li {
  margin: 0 0 10px 0;
}
.LMod ul li .d {
  color: #999999;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
  margin-left: 5px;
}
.LMod ul li a {
  background: url('/img/a2.gif') no-repeat left 6px;
  padding-left: 15px;
  text-decoration: none;
}
.LMod .more {
  margin: 10px 0;
  text-align: right;
  padding: 0 5px 0 0 ;
}
.MMod {
  border: 1px solid #eee;
  background: #fff;
}
.RMod {
  border: 1px solid #eee;
  background: #fff;
  padding: 10px;
}
.RMod strong {
  color: #333333;
  display: block;
  font-size: 14pt;
  font-weight: normal;
  margin: 0 0 10px 0;
}
.RMod strong a {
  float: right;
  font-weight: normal;
  font-size: 10pt;
  margin: 5px 2px 0 0;
}
.RMod ul li a {
  color: #333333;
  text-decoration: none;
}
.RMod ul li a:hover {
  color: #000;
}
#Ad {
  margin: 20px 0 0 0;
}
#Ad strong {
  display: block;
  margin: 0 0 10px 0;
}
#AboutMe {
  padding: 20px;
}
#MyBlog {
  background: #0072bb;
  padding: 10px;
  margin-bottom: 10px;
}
#MyBlog a {
  text-decoration: none;
  color: #fff;
  font-size: 16pt;
  float: left;
  margin-left: 10px;
}
#MyBlog .action {
  float: left;
  width: 30px;
  height: 30px;
  background: url('/img/2012/action-icons.png') no-repeat 0 0;
}
#MyBlog:hover {
  background: #005388;
}
#TopBlogs {
  margin: 10px 0 0 0;
  padding-bottom: 10px;
}
#TopBlogs strong {
  padding-left: 5px;
  padding-right: 0;
}
#TopBlogs strong a {
  font-weight: normal;
  float: right;
  text-decoration: none;
  color: #000;
}
#TopBlogs ul li {
  margin: 0 5px 3px 0;
}
#TopBlogs ul li .s {
  font-size: 9pt;
  color: #999;
  margin-left: 5px;
}
#TopBlogs ul li .d {
  float: right;
  font-size: 9pt;
}
#TopBlogs ul li a {
  background: none;
  padding-left: 10px;
}
#UserSkills #UserScore {
  border-bottom: 1px dashed #eee;
  overflow: hidden;
  padding-bottom: 10px;
}
#UserSkills #UserScore h1 {
  font-size: 12pt;
  font-weight: normal;
  float: left;
  text-align: center;
}
#UserSkills #UserScore h1 em {
  font-size: 20pt;
  color: red;
  font-style: normal;
  color: #F00;
  display: block;
  margin: 5px 0 0 0;
}
#UserSkills #UserScore h1 a {
  color: #999;
  text-decoration: none;
  display: block;
}
#UserSkills #UserScore h1 a:hover {
  color: #000;
}
#UserSkills #UserScore h1.best {
  width: 80px;
}
#UserSkills #UserScore h1.score {
  width: 90px;
  border-left: 1px solid #eee;
  padding-left: 10px;
}
#UserSkills h1.Title {
  color: #0072bb;
  font-size: 16pt;
}
#UserSkills h1.Title a {
  font-weight: normal;
  font-size: 10pt;
  float: right;
  margin: 3px 2px 0 0;
}
#UserSkills ul li {
  margin: 10px 0 0 0;
}
#UserSkills ul li strong {
  font-size: 10.5pt;
  margin: 0px;
  font-weight: bold;
}
#UserSkills ul li p {
  color: #666;
}
#UserSkills ul li .more {
  display: block;
}
#UserSkills #OtherScore {
  border-bottom: 1px dashed #eee;
  padding: 5px 0 5px 20px;
  overflow: hidden;
}
#UserSkills #OtherScore h1 {
  font-size: 10pt;
  font-weight: normal;
  float: left;
}
#UserSkills #OtherScore h1 em {
  font-size: 10pt;
  color: red;
  font-style: normal;
  color: #F00;
  margin: 0 15px 0 0px;
  float: right;
  width: 50px;
  text-align: right;
}
#UserSkills #OtherScore h1 a {
  color: #999;
  text-decoration: none;
  display: block;
  text-align: left;
  width: 140px;
}
#UserSkills #OtherScore h1 a:hover {
  color: #000;
}
#Profile li {
  margin: 10px 0 0 0;
  font-size: 9pt;
  color: #666666;
}
#Profile li b {
  display: block;
  color: #333333;
  margin-bottom: 2px;
}
#Profile li b.inline {
  display: inline;
}
#Profile li a {
  color: #0072bb;
}
#Profile li a:hover {
  color: #0000aa;
}
#FavorBox {
  margin-top: 10px;
  padding-bottom: 20px;
}
#FavorBox ul {
  margin: 0 0 0 0;
}
#FavorBox ul li {
  float: left;
  width: 85px;
  height: 62px;
  text-align: center;
  margin: 30px 0 0 5px;
  overflow: hidden;
}
#FavorBox ul li .logo {
  display: block;
  margin: 0 0 3px 0;
}
#FavorBox ul li img {
  width: 40px;
  height: 40px;
}
#FavorBox ul li .name {
  font-weight: bold;
  font-size: 9pt;
  height: 20px;
  line-height: 20px;
}
#FavorUpdate {
  margin-top: 10px;
}
#FavorUpdate ul {
  margin: 20px 0 0 0;
}
#FavorUpdate ul li {
  margin: 0 0 10px 0;
  color: #999999;
  font-size: 9pt;
}
#FavorUpdate ul li a {
  font-weight: bold;
  font-size: 9pt;
  display: block;
  margin-bottom: 2px;
}
#FavorUpdate ul li .date {
  font-size: 8pt;
  -webkit-text-size-adjust: none;
}
.AdminNav {
  background: #0072bb;
  padding: 10px;
  font-size: 14pt;
}
.AdminNav a.u {
  float: left;
  width: 40px;
}
.AdminNav a.u img {
  width: 36px;
  height: 36px;
}
.AdminNav a.h {
  float: left;
  color: #fff;
  margin: 5px 0 0 10px;
}
.AdminNav a.h:hover {
  color: #eee;
}
#AdminMenus {
  font-size: 10.5pt;
}
#AdminMenus li.caption {
  margin-bottom: 20px;
}
#AdminMenus li.caption ol {
  margin: 10px 0 0 0;
  line-height: 26px;
}
#AdminMenus li.caption ol li {
  padding-left: 10px;
}
#AdminMenus li.caption ol li.active {
  background: #f6f6f6;
  font-weight: bold;
}
#AdminMenus li.caption ol li.active a {
  color: #333333;
}
#AdminBody {
  min-height: 600px;
  color: #333333;
}
#AdminBody .AdminHead {
  border-bottom: 1px solid #cccccc;
  margin-bottom: 20px;
}
#AdminBody .AdminHead h1 {
  color: #666666;
  margin-bottom: 15px;
}
#AdminBody .AdminHead h1 a {
  text-decoration: none;
  color: #666666;
}
#AdminBody .AdminHead h1 .SubTitle {
  font-weight: normal;
  font-size: 10.5pt;
  margin-left: 10px;
}
#AdminBody .AdminHead h1 .SubTitle a {
  color: #666666;
}
#AdminBody .AdminHead h1 .SubTitle a:hover {
  color: #000;
  text-decoration: underline;
}
#AdminBody .AdminHead .RelativeLinks {
  float: right;
  margin: 10px 10px 0 0;
}
#AdminBody .AdminHead .RelativeLinks a {
  margin-left: 10px;
}
#AdminBody .AdminHead .Tabs {
  font-size: 16pt;
  padding-left: 20px;
  height: 37px;
  height: 37px;
}
#AdminBody .AdminHead .Tabs li {
  float: left;
  margin-right: 10px;
}
#AdminBody .AdminHead .Tabs li a {
  display: block;
  padding: 5px 10px;
  color: #666666;
  text-decoration: none;
}
#AdminBody .AdminHead .Tabs li a:hover {
  color: #000;
}
#AdminBody .AdminHead .Tabs li a.active {
  background: #cd4900;
  color: #fff;
}
#AdminBody .AdminHead .Tabs li a.active:hover {
  color: #fff;
}
#ProfileForms .Langs strong {
  display: block;
}
#ProfileForms .Langs ul li {
  float: left;
  width: 160px;
  height: 25px;
}
#ProfileForms .Fields ul li {
  float: left;
  width: 220px;
  height: 25px;
}
.Drafts ul li {
  margin: 0 0 20px 0;
  border-bottom: 1px dashed #cccccc;
  padding-bottom: 10px;
}
.Drafts ul li h2 {
  color: #999999;
}
.Drafts ul li h2 a.title {
  font-size: 12pt;
  color: #333333;
  text-decoration: none;
}
.Drafts ul li h2 .opts {
  float: right;
  font-weight: normal;
  font-size: 10pt;
}
.Drafts ul li p {
  color: #999999;
  margin: 10px 10px 0 10px;
  line-height: 24px;
}
.BlogCommentList li {
  margin: 0 0 10px 0;
  border-bottom: 1px dashed #666666;
  padding-bottom: 10px;
}
.BlogCommentList li .user {
  width: 50px;
}
.BlogCommentList li .user img {
  width: 36px;
  height: 36px;
}
.BlogCommentList li .body {
  overflow: hidden;
}
.BlogCommentList li .body a {
  font-weight: bold;
}
.BlogCommentList li .body p {
  color: #666666;
  margin: 5px 0 0 0;
  line-height: 22px;
}
.BlogCommentList li .opts {
  width: 100px;
}
.BlogCommentList li .opts a {
  display: block;
  text-decoration: none;
}
.BlogCatalogManage form {
  margin: 20px 0 0 0;
}
.BlogCatalogManage form h3 {
  font-size: 10.5pt;
  margin: 0 0 10px 0;
}
.BlogCatalogManage form h3 span {
  font-weight: normal;
  margin: 0 0 0 10px;
  color: #666666;
}
.BlogCatalogManage form.BlogCatalogs table {
  background: #cccccc;
}
.BlogCatalogManage form.BlogCatalogs table th {
  background: #999999;
  color: #333333;
  padding: 3px 10px;
  text-align: center;
  font-weight: bold;
}
.BlogCatalogManage form.BlogCatalogs table td {
  background: #fff;
  padding: 3px 5px;
}
.BlogCatalogManage form.BlogCatalogs table td a {
  text-decoration: none;
}
.BlogCatalogManage form.BlogCatalogs table td.idx,
.BlogCatalogManage form.BlogCatalogs table td.num {
  text-align: center;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
}
.BlogLinkManage form {
  margin: 20px 0 0 0;
}
.BlogLinkManage form h3 {
  font-size: 10.5pt;
  margin: 0 0 10px 0;
}
.BlogLinkManage form h3 span {
  font-weight: normal;
  margin: 0 0 0 10px;
  color: #666666;
}
.BlogLinkManage form li {
  list-style: none;
  margin-bottom: 10px;
}
.BlogLinkManage form li label {
  float: left;
  width: 80px;
  text-align: right;
}
.BlogLinkManage form .submit input.BUTTON {
  background: #0072bb;
  border: none;
  color: #FFF;
  font-weight: normal;
  font-size: 11pt;
  cursor: pointer;
  padding: 2px 8px;
  margin-right: 5px;
}
.BlogLinkManage form .submit input.BUTTON:hover {
  background: #005388;
}
.BlogLinkManage form.BlogLinks table {
  background: #cccccc;
}
.BlogLinkManage form.BlogLinks table th {
  background: #0072bb;
  color: #FFF;
  padding: 3px 10px;
  text-align: center;
  font-weight: bold;
}
.BlogLinkManage form.BlogLinks table td {
  background: #fff;
  padding: 3px 5px;
}
.BlogLinkManage form.BlogLinks table td a {
  text-decoration: none;
}
.BlogLinkManage form.BlogLinks table td.idx,
.BlogLinkManage form.BlogLinks table td.num {
  text-align: center;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
}
#Logs {
  margin: 10px 0 0 0;
  padding: 10px;
}
#Logs .UserLogs {
  margin: 20px 10px;
}
ul.LogTabs {
  border-bottom: 1px solid #cd4900;
  padding-left: 10px;
  height: 28px;
  line-height: 28px;
}
ul.LogTabs li {
  float: left;
  margin-right: 5px;
}
ul.LogTabs li a {
  display: block;
  background: #f6f6f6;
  text-decoration: none;
  font-size: 10.5pt;
  padding: 0 10px;
  color: #999999;
}
ul.LogTabs li a:hover {
  color: #666666;
}
ul.LogTabs li.active a {
  background: #cd4900;
  color: #fff;
}
ul.LogFilter {
  padding: 0 0 0 10px;
  margin-top: 10px;
  height: 20px;
  line-height: 20px;
}
ul.LogFilter li {
  float: left;
  margin-right: 15px;
}
ul.LogFilter li a {
  text-decoration: none;
  display: block;
  padding: 0 5px;
}
ul.LogFilter li a.active {
  border: 1px solid #cd4900;
}
#do_batch_btn {
  text-decoration: none;
}
#FavoriteList {
  padding-right: 30px;
}
#FavoriteTags {
  width: 170px;
}
#FavoriteTags strong {
  display: block;
  margin: 0 0 20px 0;
}
#FavoriteList ul.FavList {
  margin: 20px 0 20px 10px;
}
#FavoriteList ul.FavList li {
  padding: 10px 0;
  border-bottom: 1px dashed #FFF;
}
#FavoriteList ul.FavList li.even {
  background-color: #FFF;
}
#FavoriteList ul.FavList li .opts {
  float: right;
  font-size: 9pt;
}
#FavoriteList ul.FavList li .opts a {
  color: #666666;
}
#FavoriteList ul.FavList li .opts a:hover {
  color: #000;
}
#FavoriteList ul.FavList li a.title {
  text-decoration: none;
  font-size: 10.5pt;
  padding-left: 25px;
}
a.tag.success {
  background-color: #5cc26f;
}
#FavoriteList ul.FavList li .tags {
  margin-left: 25px;
}
#FavoriteList ul.FavList li .tags a {
  padding: 1px 3px;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
}
#FavoriteList ul.FavList li .tags input[type='text'] {
  padding: 0 3px;
}
#FavoriteList ul.FavList li .tags input[type='checkbox'] {
  float: right;
  display: none;
}
#FavoriteList ul.FavList li .tags form {
  margin-top: 5px;
  color: #666666;
}
#FavoriteTags .tag span.count {
  margin-left: 3px;
}
#FavoriteTags .tag:hover span.count {
  display: none;
}
#FavoriteTags .tag span.delete {
  color: #A00;
  margin-left: 3px;
  display: none;
}
#FavoriteTags .tag:hover span.delete {
  display: inline;
  margin-left: 3px;
}
ul#TagSetting {
  margin-top: 20px;
}
ul#TagSetting li input {
  display: none;
  height: 18px;
  line-height: 20px;
}
ul#TagSetting li {
  height: 20px;
  float: left;
  width: 47%;
  padding: 2px;
  margin: 3px 5px;
}
ul#TagSetting li span.tagname {
  margin-right: 5px;
  padding: 0 5px;
  height: 20px;
}
ul#TagSetting li:hover {
  background-color: #CCC;
}
ul#TagSetting li:hover a {
  display: inline;
}
ul#TagSetting li a {
  text-decoration: none;
  float: right;
  font-size: 12px;
  display: none;
}
ul#TagSetting li a.remove {
  margin: 0 10px;
}
ul#TagSetting li img {
  vertical-align: middle;
}
.NewsList {
  margin: 0 0 20px 0;
}
.NewsList li {
  margin-bottom: 5px;
}
.NewsList li .title a {
  text-decoration: none;
}
.NewsList li .stat {
  width: 110px;
  font-size: 9pt;
  color: #666666;
}
.NewsList li .date {
  width: 70px;
  color: #666666;
  font-size: 9pt;
}
.NewsList li .opts {
  width: 110px;
  text-align: right;
  color: #666666;
}
.ProjectList li {
  margin: 0 0 10px 0;
}
.ProjectList .head {
  font-weight: bold;
  color: #000;
  border-bottom: 1px solid #cccccc;
  padding-bottom: 10px;
}
.ProjectList li .date {
  width: 150px;
  color: #666666;
  font-size: 9pt;
}
.ProjectList li .status {
  width: 100px;
}
.ProjectList li .opts {
  width: 80px;
  text-align: right;
}
.UserList h1 {
  border-bottom: 1px solid #cccccc;
  margin: 0 0 10px 0;
  padding-bottom: 15px;
  color: #666666;
}
.UserList h1 .SubTitle {
  font-size: 10pt;
  font-weight: normal;
  color: #666666;
  margin-left: 10px;
}
.UserList .SortBar {
  background: #eee;
  margin-bottom: 20px;
  padding: 3px 10px;
}
.UserList .SortBar a {
  margin-left: 10px;
}
.UserList .SortBar a.active {
  font-weight: bold;
}
.UserList a {
  text-decoration: none;
}
.UserList li {
  margin: 0 0 10px 0;
  border-bottom: 1px dashed #cccccc;
  padding-bottom: 10px;
}
.UserList li td {
  vertical-align: top;
  padding: 0;
}
.UserList li .avatar {
  width: 45px;
}
.UserList li .avatar img {
  width: 32px;
  height: 32px;
  margin-top: 5px;
}
.UserList li .update .name {
  font-weight: bold;
}
.UserList li .update .nickname {
  margin-left: 10px;
  color: #666666;
}
.UserList li .update .set_memo {
  display: none;
}
.UserList li .update .log {
  color: #666666;
  margin: 5px 0 0 0;
  font-size: 9pt;
}
.UserList li .update .log .user {
  display: none;
}
.UserList li .update .log .rpost {
  margin-left: 10px;
}
.UserList li .opts {
  text-align: right;
  width: 80px;
}
.UserList li .opts a {
  display: block;
}
.Msgs a {
  text-decoration: none;
}
.Msgs li {
  margin: 0 0 10px 0;
  border-bottom: 1px dashed #cccccc;
}
.Msgs li .user {
  width: 48px;
}
.Msgs li .user img {
  width: 32px;
  height: 32px;
  margin-top: 5px;
}
.Msgs li .msg {
  color: #333333;
  margin-bottom: 10px;
  line-height: 22px;
}
.Msgs li .bottom {
  height: 20px;
}
.Msgs li .date {
  float: left;
  width: 120px;
  font-size: 9pt;
  color: #666666;
}
.Msgs li .opts {
  float: right;
  text-align: right;
  color: #999999;
}
.MsgForm {
  margin: 0 0 20px 48px;
}
.MsgForm strong {
  display: block;
  margin-bottom: 5px;
}
.MsgForm strong span {
  font-weight: normal;
  margin-left: 10px;
}
.MsgForm textarea {
  width: 500px;
  height: 60px;
  padding: 3px;
}
#MyTweetForm {
  padding: 10px 15px;
  border: 1px solid #eee;
  background: #fff;
}
#TForm #TFormEditor {
  border: 2px solid #0072bb;
  padding: 2px;
  margin: 2px 0 0 0;
  background: #fff;
}
#TForm textarea {
  border: 0;
  width: 98%;
  height: 50px;
  padding: 5px;
  font-size: 10pt;
  overflow: auto;
  scroll: none;
  background: #fff;
}
#TFormTitle {
  color: #888;
  position: relative;
}
#TFormTitle .r {
  float: right;
  margin: 0px 10px 0 0;
  font-size: 9pt;
}
#TFormTitle .r em {
  font-style: normal;
  font-weight: bold;
  font-size: 10.5pt;
  color: #A00;
  margin: 0 3px 0 0;
}
#TForm #TFormOpts {
  margin: 0 0 0 5px;
}
#TForm #TFormOpts ul {
  float: left;
  margin: 2px 0 0 0;
  padding: 1px;
}
#TForm #TFormOpts ul li {
  display: inline;
  margin-right: 5px;
}
#TForm #TFormOpts ul li a {
  font-size: 9pt;
  text-decoration: none;
  color: #666666;
  border: 1px solid #fff;
  padding: 1px 2px 1px 18px;
}
#TForm #TFormOpts ul li a:hover {
  border: 1px solid #0072bb;
}
#TForm #TFormOpts ul li.t {
  color: #666666;
  margin-right: 0;
}
#TForm #TFormOpts ul li.emotion a {
  background: url('/img/space/emotion.gif') no-repeat left center;
}
#TForm #TFormOpts ul li.img a {
  background: url('/img/space/img.gif') no-repeat 2px center;
  padding-left: 20px;
}
#TForm #TFormOpts ul li.app a {
  background: url('/img/space/app.gif') no-repeat left center;
}
#TForm #TFormOpts ul li.code a {
  background: url('/img/code.gif') no-repeat left center;
}
#TForm #TFormOpts input.B {
  cursor: pointer;
  border: 0;
  float: right;
  font-size: 12pt;
  padding: 3px 20px 5px 20px;
  margin-right: 10px;
  color: #fff;
  background: #0072bb;
}
#TweetFormPopupWraper {
  display: none;
  position: absolute;
  z-index: 9999;
}
#TweetFormPopupArrow {
  background-image: url('/img/space/up_arrow.gif');
  background-repeat: no-repeat;
  padding-top: 5px;
}
#TweetFormPopupWraper .emotions {
  background-position: 51px 0px;
}
#TweetFormPopupWraper .images {
  background-position: 107px 0px;
}
#TweetFormPopupWraper .code {
  background-position: 165px 0px;
}
#TweetFormPopup {
  width: 392px;
  border: 2px solid #cccccc;
  background: #ffc;
  padding: 5px;
}
#TweetFormPopup a.close {
  float: right;
  font-size: 8pt;
  font-weight: bold;
  -webkit-text-size-adjust: none;
}
#TweetFormPopup a.emotion {
  float: left;
  width: 24px;
  height: 24px;
  background-image: url('/js/ke/plugins/emoticons/qq.gif');
  background-repeat: no-repeat;
  margin: 0 2px 4px 0;
  border: 1px solid #f6f6f6;
}
#TweetFormPopup a.emotion:hover {
  border: 1px solid #0072bb;
}
#TweetFormPopup .TweetPopupTitle {
  background: #666666;
  color: #fff;
  padding: 3px 5px;
  margin: 0 0 10px 0;
  font-weight: bold;
}
#TweetFormPopup .TweetPopupTitle a {
  float: right;
  color: #FFF;
}
#TweetImages .l {
  margin: 0 0 10px 0;
}
#TweetImages .tip {
  color: #666666;
}
#TweetCode {
  padding: 5px;
}
#TweetCode textarea {
  width: 100%;
  height: 250px;
  display: block;
  margin: 10px 0;
}
#TweetCode pre {
  font-size: 9pt;
  font-family: Courier New,Arial;
  border: 1px solid #ddd;
  border-left: 5px solid #6CE26C;
  background: #f6f6f6;
  padding: 5px;
  margin: 0 0 10px 0;
}
.Tweet {
  border-bottom: 1px dashed #cccccc;
  padding: 0 0 5px 0;
  margin: 0 0 10px 0;
}
.Tweet a {
  text-decoration: none;
}
.Tweet .TweetUser {
  width: 48px;
}
.Tweet .TweetUser img {
  width: 32px;
  height: 32px;
  margin-top: 5px;
}
.Tweet .TweetContent {
  color: #333333;
}
.Tweet .TweetContent h5 {
  font-weight: normal;
  font-size: 10pt;
  color: #999999;
}
.Tweet .TweetContent .post {
  font-size: 10.5pt;
  line-height: 22px;
  margin: 5px 0 0 0;
  overflow: hidden;
}
.Tweet .TweetContent .ref {
  font-size: 9pt;
  margin: 3px 0 0 0;
  background: url('/img/space/up_arrow.gif') no-repeat 15px 0;
  padding-top: 5px;
}
.Tweet .TweetContent .ref .p {
  border: 1px solid #cccccc;
  background: #f6f6f6;
  padding: 5px;
  color: #999999;
}
.Tweet .TweetContent .ref .rpost {
  display: block;
  margin: 3px 0;
}
.Tweet .TweetContent .photo {
  margin: 10px 0;
}
.Tweet .TweetContent .photo a[class^="rotate-"] {
  width: 14px;
  height: 14px;
  display: inline-block;
}
.Tweet .TweetContent .photo .rotate-clockwise {
  background: url("/img/rotate-clockwise.png") no-repeat;
  background-size: 14px 14px;
}
.Tweet .TweetContent .photo .rotate-anticlockwise {
  background: url("/img/rotate-anticlockwise.png") no-repeat;
  background-size: 14px 14px;
}
.Tweet .TweetContent .photo img {
  border: 1px solid #f6f6f6;
  padding: 1px;
  max-width: 450px;
  cursor: pointer;
}
.Tweet .TweetContent .photo img:hover {
  border: 1px solid #0072bb;
}
.Tweet .TweetContent .photo .ImgMenu a {
  margin: 0 5px 0 0;
}
.Tweet .TweetContent embed {
  margin: 3px 0 0 0;
}
.Tweet .TweetContent .video {
  margin: 10px 0;
}
.tweet_video_operation {
  display: none;
}
.tweet_video_description {
  margin: 0 0 5px 0;
  font-size: 12px;
}
.tweet_thumb_wrapper {
  display: inline-block;
  border: 1px solid #D2D2D2;
  background: white;
  overflow: hidden;
  padding: 3px;
  position: relative;
  cursor: pointer;
}
.tweet_play_video {
  opacity: 0.7;
  display: inline-block;
  width: 37px;
  height: 37px;
  background: url('/img/play_video.png') no-repeat;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -18px;
  margin-left: -18px;
}
.Tweet .TweetContent pre {
  margin: 5px 0 10px 0;
}
.Tweet .TweetContent .bottom {
  margin: 10px 0 0 0;
  height: 18px;
}
.Tweet .TweetContent .opts {
  font-size: 8pt;
  float: right;
}
.Tweet .TweetContent .time {
  font-size: x-small;
  margin: 0;
  color: #888;
  -webkit-text-size-adjust: none;
}
.Tweet .LogReplyList {
  margin: 0px 0 5px 0;
  display: none;
  padding: 5px 5px 5px 0;
}
.Tweet .LogReplyList .TweetRplsWrapper {
  background: #f9f9f9;
  padding: 10px 10px 20px 10px;
  border: 1px solid #cccccc;
}
.Tweet .LogReplyList .TweetRplsWrapper .loading {
  background: url('/img/loading.gif') no-repeat left center;
  padding-left: 22px;
}
.Tweet .LogReplyList #closeTweetRpls {
  float: right;
  font-weight: bold;
  line-height: 8px;
  height: 8px;
}
.Tweet .LogReplyList form {
  margin: 5px 0 0 5px;
}
.Tweet .LogReplyList form label {
  font-size: 9pt;
}
.Tweet .LogReplyList .TweetReplyOptions {
  margin: 3px 0 0 0;
}
.Tweet .LogReplyList .TweetReplyOptions input {
  float: left;
  margin: 2px 0 0 0;
}
.Tweet .LogReplyList .TweetReplyOptions label {
  float: left;
}
.Tweet .pager {
  margin: 20px 0 0 2px;
}
.TweetRpls h6 {
  font-size: 10pt;
  margin: 10px 0 5px 0;
  border-bottom: 1px solid #cccccc;
  padding-bottom: 5px;
}
.TweetRpls ul {
  font-size: 9pt;
}
.TweetRpls li {
  border-bottom: 1px dashed #cccccc;
  padding: 10px 0 5px 0;
}
.TweetRpls li .portrait {
  width: 30px;
}
.TweetRpls li .portrait img {
  width: 24px;
  height: 24px;
  margin: 5px 0 0 0;
}
.TweetRpls li .TweetReplyBody {
  overflow: hidden;
}
.TweetRpls li .TweetReplyBody .post {
  line-height: 20px;
}
.TweetRpls li .TweetReplyBody .opts {
  float: none;
  font-size: 8pt;
  -webkit-text-size-adjust: none;
  color: #999999;
  margin: 10px 0 0 0;
  height: 18px;
}
.TweetRpls li .TweetReplyBody .opts .links {
  float: right;
}
.TweetRpls li .TweetReplyBody .opts a {
  font-size: 9pt;
}
.TweetRpls .all {
  display: block;
  margin: 10px 0 0 0 ;
}
#TweetReplyPage {
  width: 600px;
}
#TweetReplyPage h1 {
  font-size: 16pt;
  margin-bottom: 20px;
}
#TweetReplyPage h1 a {
  text-decoration: none;
}
#TweetReplyForm {
  margin: 0 0 20px 0px;
}
#TweetReplyForm textarea {
  display: block;
  width: 98%;
  height: 40px;
  font-size: 9pt;
  padding: 2px;
  margin: 10px 0 5px 0;
}
#TweetReplyForm .TweetReplyOptions {
  float: right;
}
#TweetReplyForm #btn_submit {
  padding: 2px 3px;
  font-weight: bold;
  margin-right: 5px;
}
#TweetReplyPage #TweetReplies li .TweetReplyBody {
  width: 450px;
}
.gotop {
  background: url(/img/gotop.gif) no-repeat;
  display: block;
  width: 31px;
  height: 31px;
}
#SpaceHomeLayoutSelector {
  height: 350px;
}
#SpaceHomeLayoutSelector a {
  float: left;
  width: 48%;
  text-align: center;
}
#SpaceHomeLayoutSelector a em {
  display: block;
  font-style: normal;
  font-weight: bold;
  margin: 0 0 10px 0;
}
#SpaceHomeLayoutSelector a img {
  border: 3px solid #fff;
  padding: 5px;
}
#SpaceHomeLayoutSelector a.active img {
  border: 3px solid #7798CB;
}
#LayoutSelectorMsg {
  text-align: center;
  font-size: 14pt;
  margin: 20px 0 0 0;
  color: #000;
  display: none;
}
/* 通用的表单 */
.error_msg {
  height: 22px;
  color: #A00;
  margin: 10px 0 10px 0;
  background: url('/img/warning.gif') no-repeat left center;
  padding-left: 24px;
}
.error_msg a {
  padding: 0 5px 0 5px;
  font-weight: bold;
}
.ok_msg {
  height: 22px;
  color: #060;
  margin: 10px 0 10px 0;
  background: url('/img/space/tick.png') no-repeat left center;
  padding-left: 24px;
}
.ok_msg a {
  padding: 0 5px 0 5px;
  font-weight: bold;
}
.MainForm {
  font-size: 10.5pt;
}
.MainForm .Tip {
  margin: 0 0 10px 0;
  border: 1px solid #cccccc;
  background: #ffc;
  font-size: 9pt;
  padding: 10px;
  color: #00A;
}
.MainForm .Tip ul {
  margin: 10px 0 0 10px;
  line-height: 22px;
  list-style-type: disc;
  list-style-position: inside;
}
.MainForm form th {
  text-align: right;
  padding: 10px;
  font-weight: normal;
  color: #666666;
}
.MainForm form th.required {
  font-weight: bold;
}
.MainForm form td.t {
  color: #333333;
}
.MainForm form td .tip {
  color: #0072bb;
  font-size: 9pt;
}
.MainForm form input.TEXT {
  padding: 3px;
}
.MainForm form select {
  padding: 3px;
}
.MainForm form textarea {
  padding: 3px;
  font-size: 12pt;
}
.MainForm form textarea#txt_abstracts {
  width: 600px;
  height: 80px;
  font-size: 10.5pt;
}
.MainForm form input.BUTTON {
  font-size: 12pt;
  padding: 2px 5px;
}
.MainForm form input.SUBMIT {
  font-weight: bold;
  padding: 2px 10px;
}
.MainForm form .submit #error_msg {
  margin-left: 10px;
}
.MainForm .FormSection {
  margin: 20px 0;
}
.MainForm .FormSection ul {
  margin: 20px 0 0 20px;
}
.MainForm .Btn_Save {
  margin: 20px 0;
}
.MainForm .btn_save {
  background: #0072bb;
  color: #fff;
  text-decoration: none;
  height: 30px;
  margin-right: 10px;
  border: 0px solid #000;
  font-weight: bold;
  cursor: pointer;
  padding: 5px 10px;
}
.MainForm .btn_save:hover {
  background: #005388;
}
.MainForm .btn_save:hover span {
  background: #005388;
  color: #fff;
}
.write-blog .section {
  margin: 10px 0px;
  padding: 5px 0px;
  font-size: 12.5px;
}
.write-blog .b-input {
  background-color: #fff;
  border: 1px solid #D9D9D9;
  border-top-color: #C0C0C0;
  border-left-color: #d0d0d0;
  -webkit-transition: border linear .2s;
  -moz-transition: border linear .2s;
  transition: border linear .2s;
}
.write-blog .c-input {
  display: inline-block;
  height: 22px;
  padding: 5px 1% 3px 1%;
  margin-bottom: 10px;
  font-size: 12px;
  line-height: 20px;
  color: #111;
  border-radius: 0;
  vertical-align: middle;
  margin-top: 5px;
}
.write-blog .d-input {
  display: inline-block;
  height: 22px;
  padding: 5px 0px 3px 0px;
  margin-bottom: 10px;
  font-size: 12px;
  line-height: 20px;
  color: #111;
  border-radius: 0;
  vertical-align: middle;
  margin-top: 5px;
}
.write-blog .f-input {
  width: 98%;
}
.write-blog .o-input {
  height: 18px;
  margin: 0px;
  padding: 3px 5px;
}
.write-blog .t-input {
  width: 98%;
  height: 65px;
}
.write-blog .m-input {
  width: 100%;
  min-height: 450px;
  height: auto;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}
.write-blog .s-button {
  width: 200px;
  background: #428BD1;
  height: 32px;
  border: none;
  color: #FFF;
  margin-right: 10px;
  font-size: 14px;
  font-family: '微软雅黑', 'Verdana', 'sans-serif', '宋体';
  cursor: pointer;
}
.write-blog .s-button:hover {
  background: #3270AC;
}
.write-blog .blog-title {
  position: relative;
}
.write-blog .blog-title .catalog {
  position: absolute;
  right: 10px;
  top: 10px;
  display: inline-block;
  height: 22px;
  line-height: 22px;
  overflow: hidden;
  cursor: pointer;
  color: #FFF;
  z-index: 1000;
}
.write-blog .blog-title .catalog ul {
  border: 1px solid #FFF;
  background: #428BD1;
}
.write-blog .blog-title .catalog li {
  height: 22px;
  line-height: 22px;
  text-align: center;
  padding: 0px 5px;
  background: #428BD1;
}
.write-blog .blog-title .catalog li:hover {
  background: #4BA1F3;
}
.write-blog .section strong i {
  display: inline-block;
  width: 15px;
  height: 8px;
  margin-right: 8px;
}
.write-blog .section strong {
  vertical-align: middle;
}
.write-blog .check-ico {
  background: url("/img/selg.jpg") no-repeat right bottom;
  white-space: nowrap;
  line-height: 30px;
  color: #999;
  border: 2px solid #999;
  font-size: 9pt;
  padding: 3px 15px;
  cursor: pointer;
  margin: 0px 10px 1px 10px;
}
.write-blog .checked,
.multi-check:hover {
  background: url("/img/sel-b-type.gif") no-repeat right bottom;
  border: 2px solid #F00;
  color: #F00;
}
.write-blog .single-check:hover {
  color: #999;
}
.write-blog .checked:hover {
  color: #F00;
}
.write-blog .section .setting-title {
  color: #777;
  font-size: 12px;
  display: inline-block;
  margin-right: 10px;
  width: 120px;
}
.write-blog .sel-editor span.sel-box {
  float: right;
}
.write-blog .sel-editor .sel-box span {
  color: #FFF;
  padding: 2px 8px;
  background: #E7A940;
  cursor: pointer;
  font-size: 12px;
  float: left;
}
.write-blog .sel-editor span.sel-title {
  background: #FFF;
  color: #777;
}
.write-blog .sel-editor span.editor-item:hover {
  background: #CF932E;
}
.write-blog .sel-editor span.selected-editor {
  background: #40AA53;
}
.write-blog .err-msg {
  padding: 5px 15px;
  color: #F00;
  font-size: 12px;
}
.write-blog .ke-container {
  margin-top: 8px;
}
.write-blog .wmd-button .wmd-blog-prev {
  width: 60px;
  display: inline-block;
  background: #FFF;
  text-align: center;
}
.write-blog .wmd-button .wmd-blog-prev:hover {
  background: #99c0fa;
}
.edui-default {
  text-align: left;
}
/*博客分类下拉框*/
.write-blog .select_box {
  white-space: nowrap;
  line-height: 30px;
  color: #999;
  border: 2px solid #999;
  font-size: 9pt;
  padding: 3px 1px;
  cursor: pointer;
  margin: 0px 10px 1px 10px;
}
/* end 通用的表单 */
/* paging */
.pager {
  height: 28px;
  line-height: 28px;
  margin: 2px 0;
}
.pager li {
  font-size: 14px;
  text-align: center;
  margin: 0 2px 0 0;
  display: inline;
}
.pager li a {
  font-family: Courier New,Arial;
  color: #58595b;
  background-color: #f0f0f0;
  padding: 3px 5px;
  text-decoration: none;
}
.pager li a:hover {
  color: #000;
}
.pager li.prev a {
  background-color: #cccccc;
  color: #666666;
}
.pager li.next a {
  background-color: #cccccc;
  color: #666666;
}
.pager li.current a {
  color: #fff;
  background: #cd4900;
}
/*顶部导航条下拉框*/
#OSC_Banner .control_select ul.cs_content {
  border: 1px solid #666666;
}
#OSC_Banner .control_select ul li a {
  color: #666666;
}
/* end pager css */
/*主站显示team的git推送头像大小限制*/
span.commit_img img {
  width: 15px;
  height: 15px;
}
/*点赞的样式设置*/
.love {
  padding-left: 15px;
}
/*点赞链接演示*/
.love a {
  font-size: 14px;
  color: #9A9A9A;
}
.love a:hover {
  color: #6cabe1;
}
/*
.love a.loved{
	background-image:url("../../../img/person_space_love.png");
	background-repeat: no-repeat;
}
*/
.TweetUserPic img {
  width: 25px;
  border-radius: 30px;
}
.more {
  padding-left: 5px;
  padding-right: 5px;
}
/*嵌入招聘职位样式*/
.recruitment-blog .more .link {
  color: #0072bb;
}
</style>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/scrolltopcontrol.js"></script>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/jquery.atwho.js"></script>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/angular.min.js"></script>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/angular-sanitize.min.js"></script>
  <script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/angular-resource.min.js"></script>
  <link rel="stylesheet" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/font-awesome.css" type="text/css">
  <link rel="stylesheet" type="text/css" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/jquery.atwho.css">
  <link rel="alternate" type="application/rss+xml" title="大海水中鱼最新博客" href="http://my.oschina.net/yumg/rss">
  <link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://my.oschina.net/action/xmlrpc/rsd?space=2321188">
  <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://my.oschina.net/action/xmlrpc/wlwmanifest?space=2321188"> 
  <style type="text/css">
    body,table,input,textarea,select {font-family:Microsoft YaHei,Verdana,sans-serif,宋体;}

      emoji[data-emoji~=emoji] {
          display: inline-block;
          width: 24px;
          height: 24px;
          line-height: 24px;
          vertical-align: top;
          text-align: center;
      }
  </style>
  <script type="text/javascript">
  	scrolltotop.offset(100,165);
	scrolltotop.init();
  </script>
<style id="poshytip-css-tip-yellowsimple-medal" type="text/css">div.tip-yellowsimple-medal{visibility:hidden;position:absolute;top:0;left:0;}div.tip-yellowsimple-medal table, div.tip-yellowsimple-medal td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;}div.tip-yellowsimple-medal td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:10px;width:10px;overflow:hidden;}div.tip-yellowsimple-medal td.tip-right{background-position:100% 0;}div.tip-yellowsimple-medal td.tip-bottom{background-position:100% 100%;}div.tip-yellowsimple-medal td.tip-left{background-position:0 100%;}div.tip-yellowsimple-medal div.tip-inner{background-position:-10px -10px;}div.tip-yellowsimple-medal div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}</style></head>
<body>
<div id="OSC_Screen">
	<style type="text/css">
    #OSC_Banner {margin: 0 auto;text-align: left;margin-bottom: 5px;height:30px;border-top:0px;}
    #OSC_Banner a {text-decoration: none;color: #fff;}
    #OSC_Banner .cs_content a {color: #080;}
    #OSC_Banner a:hover {color: #eee;}
	#OSC_Banner a.project{background-color:transparent;}
    #OSC_Banner #OSC_Channel {float: left;height:30px;}
    #OSC_Banner #OSC_Channel ul {line-height: 18px;}
    #OSC_Banner #OSC_Channel ul li.item {float: left;margin: 0 16px 0 0;line-height: 30px;}
    #OSC_Banner #OSC_Channel ul li a.hl {font-weight: bold;}
    #OSC_Banner #OSC_Userbar {float: right;	color: #ddd;line-height:30px;margin-right:10px;}
    #OSC_Banner #OSC_Userbar em {font-style: normal;color: #fff;margin-right: 2px;}
	/*下拉菜单*/
	#OSC_Banner .control_select {position: relative;background: url('/img/down3.gif') no-repeat right 14px;padding-right: 8px;cursor: pointer;height: 25px;display: inline-block;z-index: 1001;}
	#OSC_Banner .control_select a {position: relative;}
	#OSC_Banner .control_select ul.cs_content {display: none;text-align: left;position: absolute;left: 0px;top: 25px;width: 110px;z-index: 9999;background: white;padding: 5px 0 2px 5px;font-size: 9pt;list-style-type: none;}
	#OSC_Banner .control_select ul.cs_content li {border: 0;height: 16px;line-height: 16px;margin-bottom: 8px;}
	#OSC_Banner .control_select ul.cs_content li a:hover {font-weight: bold;background: #fff;color: #A00}
	#OSC_Banner .group_msg_count {display: inline-block;	padding: 2px;border-radius: 3px;background-color: RGB(255, 113, 112);color: white;font-size: 12px;height: 10px;text-align: center;
		line-height: 10px;min-width: 15px;box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);-webkit-box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);-moz-box-shadow: 1px 1px 1px RGBA(0, 0, 0, 0.2);}
	.tip-yellowsimple .tip-arrow-top{left:80%;}
</style>
<script type="text/javascript">
  	g_user = {
	id:0,
	name:'',
	login:false};</script>
<script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/utils.js"></script>
<script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/channel.js"></script>
<div id="OSC_Banner">
        <div id="OSC_Channel" style="float:left;margin-left:10px;">
        	<ul>
        	<li class="item"><a href="http://www.oschina.net/" class="home">首页</a></li>        	<li class="item control_select"><a href="http://www.oschina.net/project" class="project">开源项目</a>
				<ul class="cs_content">					
                	                	<li><a href="http://www.oschina.net/project/lang/19/java">Java 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/194/csharp">C# 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/22/php">PHP 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/21/c">C/C++ 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/26/ruby">Ruby 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/25/python">Python 开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/358/go">Go开源软件</a></li>
                	<li><a href="http://www.oschina.net/project/lang/28/javascript">JS开源软件</a></li>
				</ul>
			</li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/question" class="question">问答</a>				
				<ul class="cs_content">					
                	<li><a href="http://www.oschina.net/question?catalog=1"> 技术问答 » </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=2"> 技术分享 » </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=3"> IT大杂烩 » </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=100"> 职业生涯 » </a></li>
                	<li><a href="http://www.oschina.net/question?catalog=4"> 站务/建议 » </a></li>
                	<li><a href="http://www.oschina.net/alipay"> 支付宝专区 » </a></li>
                	<li><a href="http://www.oschina.net/hardware"> 开源硬件专区 » </a></li>
				</ul>
			</li>
        	<li class="item"><a href="http://www.oschina.net/code/list" class="code">代码</a></li>
        	        	<li class="item"><a href="http://www.oschina.net/blog" class="blog">博客</a></li>
        	<li class="item"><a href="http://www.oschina.net/translate" class="tran">翻译</a></li>
            <li class="item"><a href="http://www.oschina.net/news" class="news">资讯</a></li>
        	<li class="item control_select">
				<a href="http://www.oschina.net/android" class="mobile">移动开发</a>
				<ul class="cs_content cs_mobile">
                	<li class="android_"><a href="http://www.oschina.net/android">Android开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/home">iOS开发专区</a></li>
                	<li class="ios_"><a href="http://www.oschina.net/ios/codingList">iOS代码库</a></li>
                	<li class="wp7_"><a href="http://www.oschina.net/wp">Windows Phone</a></li>
				</ul>
			</li>
        	<li class="item t_job"><a href="http://www.oschina.net/job" class="job">招聘</a></li>
									            <li class="item control_select">
                <a href="http://city.oschina.net/" id="MyCities" title="城市圈">城市圈</a>
							</li>
        	</ul>
        </div>
		<div id="OSC_Userbar">
                		    		当前访客身份：游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Fyumg%2Fblog%2F390486">登录</a> | <a href="http://www.oschina.net/home/reg">加入开源中国</a> ]
    				</div>
		<div class="clear"></div>
</div>	<div id="OSC_Topbar">
		<div id="VisitorInfo">
		当前访客身份：
				游客 [ <a href="http://www.oschina.net/home/login?goto_page=http%3A%2F%2Fmy.oschina.net%2Fyumg">登录</a> | <a href="http://www.oschina.net/home/reg">加入开源中国</a> ]
				
		</div>
		<div id="SearchBar">
    		<form action="http://www.oschina.net/search">
				<input type="hidden" name="user" value="2321188">
																<span class="ipt f_l">
    			<input type="text" id="txt_q" name="q" class="SERACH" value="在 39980 款开源软件中搜索" onblur="(this.value==&#39;&#39;)?this.value=&#39;在 39980 款开源软件中搜索&#39;:this.value" onfocus="if(this.value==&#39;在 39980 款开源软件中搜索&#39;){this.value=&#39;&#39;;};this.select();">
				</span>
				                <div class="search-by selectbox">
    				<span class="hide">
    				<select name="scope">					
                        <option value="project" selected="">软件</option>
                        <option value="code">代码</option>
                        <option value="bbs">讨论区</option>
                        <option value="news">新闻</option>
                        <option value="blog">博客</option>
    				</select>
    				</span>
                  <div class="search_on" id="search-item"><span class="text">软件</span></div>
                  <ul class="search_list" style="display: none;">
                     <li class="search-item"><a href="http://my.oschina.net/yumg/blog/390486#1">软件</a></li>
                     <li><a href="http://my.oschina.net/yumg/blog/390486#2">代码</a></li>
                     <li><a href="http://my.oschina.net/yumg/blog/390486#3">讨论区</a></li>
                     <li><a href="http://my.oschina.net/yumg/blog/390486#4">新闻</a></li>
                     <li><a href="http://my.oschina.net/yumg/blog/390486#5">博客</a></li>
                  </ul>
                </div>
				<input type="submit" value="搜索" class="bnt f_r">			
    		</form>
		</div>
		<div class="clear"></div>
	</div>
	<div id="OSC_Content">            	            			


<style>
	.icon{width:20px;height:20px;vertical-align: middle;display:inline-block;font-size:14px;text-align:center;color:#FFF;font-weight: bold;}
	.catalogs{padding:0px;margin:0px;position:relative;display:inline-block;}
    .catalogs ul{padding:0px;margin:0px;position:absolute;left:-8px;top: -21px;clear:left;width:120px;height:14px;overflow:hidden;background:#FFF;z-index:1000;padding:5px;border:1px solid #FFF;}
    .catalogs ul:hover{height:auto;background:#fff;border:1px solid #4466bb;}
    .catalogs ul li a:hover{color:#A00;font-weight: bold;}
	.BlogStat a:hover{background:#FFF;}
	.BlogStat{font-size:12px;line-height:20px;}
	.BlogStat .g{color:#40AA53}
	.BlogTags{margin-top:8px;}
		.BlogAbstracts{}
</style>
<div id="SpaceLeft">
<div class="Owner">
	    <a href="http://my.oschina.net/yumg" class="Img"><img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/2321188_100.gif" align="absmiddle" alt="YuMG" title="YuMG" class="LargePortrait"></a>
    <span class="U">
                    <a href="http://my.oschina.net/yumg" class="Name" title="男">YuMG</a>
        		<span class="opts">
			<img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/men.png" align="absmiddle" title="男">
        			<script type="text/javascript">
var nologin = "<a href='javascript:_follow_nologin()' title='成为TA的粉丝'>关注此人</a>"
var follow0 = "<a href='javascript:_follow_user(2321188,true)' title='成为TA的粉丝'>关注此人</a>";
var follow1 = "已关注 | <a href='javascript:_follow_user(2321188,false)' title='取消关注后，此人的更新信息将不会出现在你的首页'>取消</a>";
var follow2 = "互相关注 | <a href='javascript:_follow_user(2321188,false)' title='取消关注后，此人的更新信息将不会出现在你的首页'>取消</a>";
var follow4 = "<a href='javascript:_follow_user(2321188,true)' title='成为TA的粉丝'>+关注此人</a>";

document.write("<span id='_follow_2321188_action_'>");
	document.write(nologin);
document.write("</span>");

function _follow_nologin(){
	if(confirm('必须登录后才能关注，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+location.href;
	}
}

function _follow_user(uid, follow){
	var action = follow?"/action/user/follow":"/action/user/unfollow";
	ajax_post(action,"id="+uid+"&user=${g_user.id}",function(result){
		var act = $('#_follow_2321188_action_');
		if(result == '0')
			_follow_nologin();
		else if(result == '1')
			act.html(follow0);
		else if(result == '2')
			act.html(follow1);
		else if(result == '3')
			act.html(follow2);
		else if(result == '4')
			act.html(follow4);
	});
}
</script><span id="_follow_2321188_action_"><a href="javascript:_follow_nologin()" title="成为TA的粉丝">关注此人</a></span>				</span>
    </span>
    <div class="clear"></div>
    <div class="stat">
    	<a href="http://my.oschina.net/yumg/fellow">关注<span>(0)</span></a>
    	<a href="http://my.oschina.net/yumg/fans">粉丝<span>(2)</span></a>
    	<a href="http://www.oschina.net/question/3307_20931" title="查看OSCHINA积分规则">积分<span>(1)</span></a>
                       
    </div>
</div>    <style type="text/css">
    #Medals {margin-left: 3px; height: 28px;}
    #Medals li {float: left;margin: 3px 5px;line-height: 24px;}
    .tip-yellowsimple-medal {
        z-index: 1000;
        text-align: left;
        border: 1px solid #E6DEB6;
        border-radius: 4px;
        -moz-border-radius: 4px;
        -webkit-border-radius: 4px;
        padding: 6px 8px;
        min-width: 50px;
        max-width: 300px;
        color: #000;
        background-color: #FFFEF2;
    }
	.tip-yellowsimple-medal .tip-arrow-left {
		visibility: inherit;
        margin-top: -4px;
        margin-left: -6px;
        top: 15px;
        left: 0;
        width: 6px;
        height: 9px;
        background: url(/js/2012/poshytip/tip-yellowsimple/tip-yellowsimple_arrows.gif?t=1451964198000) no-repeat -27px 0;
	}
	div.tip-yellowsimple-medal div.tip-arrow {
        visibility: hidden;
        position: absolute;
        overflow: hidden;
        font: 1px/1px sans-serif;
	}
</style>
<script type="text/javascript">
    $(function(){
        $('#Medals a').poshytip({
            className: 'tip-yellowsimple-medal',
            alignTo: 'target',
            alignX: 'right',
            alignY: 'bottom',
            offsetX: 10,
            offsetY: -30,
            fade: false,
            slide: false,
            content: function(updateCallback) {
                ajax_get("/action/ajax/get_medal_detail?owner=2321188&medalId="+$(this).attr('medalId')+"&time="+new Date().getTime(),false,function(html){
                    updateCallback(html);
                    if($('.tip-arrow.tip-arrow-left').last().offset().top >= temp.offset().top) {
                        $('.tip-arrow.tip-arrow-left').last().css({top : "15px"});
                    }
                    else {
                        $('.tip-arrow.tip-arrow-left').last().css({top : "135px"});
                    }
                });
                temp = $(this);
                return "<div style='height:100px;'>Loading...</div>";
            }
        });
    });
</script>
<style>
#MyResume textarea {width:170px;height:60px;font-size:9pt;}
</style>
<div class="Resume" id="MyResume">
攻城狮子大开口口相传</div>

<div class="Opts clearfix">
	<a href="javascript:sendmsg(2321188, 0)" class="a1 sendmsg"><i>.</i><span>发送私信</span></a>
	<a href="http://www.oschina.net/question/ask?user=2321188" class="a2 ask"><i>.</i><span>请教问题</span></a>
</div><div class="Mod" id="BlogCatalogs">
  <strong> 博客分类</strong>
  <ul>
	    	<li><a href="http://my.oschina.net/yumg/blog?catalog=3280478">其它</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/yumg/blog?catalog=3287249">Splunk</a><span>(2)</span></li>
		<li><a href="http://my.oschina.net/yumg/blog?catalog=3331135">Ruby</a><span>(1)</span></li>
		<li><a href="http://my.oschina.net/yumg/blog?catalog=3378275">Kibana</a><span>(2)</span></li>
		<li><a href="http://my.oschina.net/yumg/blog?catalog=3272944">SI Manual</a><span>(3)</span></li>
		<li><a href="http://my.oschina.net/yumg/blog?catalog=3298069">Logstash</a><span>(5)</span></li>
	  </ul>
</div><div class="Mod" id="HotBlogs">
  <strong>阅读排行</strong>
  <ol>
			<li><a href="http://my.oschina.net/yumg/blog/414838">1. Logstash源码分析与扩展开发</a></li>
				<li><a href="http://my.oschina.net/yumg/blog/387701">2. Spring Integration 中文手册 (1)</a></li>
				<li><a href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区.html">3. Spring Integration 中文手册 (2) </a></li>
				<li><a href="http://my.oschina.net/yumg/blog/386864">4. Spring Integration 中文手册 (0)</a></li>
				<li><a href="http://my.oschina.net/yumg/blog/389412">5. Lucene 5.0 代码样例</a></li>
				<li><a href="http://my.oschina.net/yumg/blog/398468">6. Splunk数据处理概要</a></li>
				<li><a href="http://my.oschina.net/yumg/blog/546919">7. 配置Logstash（1） — 配置文件的结构</a></li>
				<li><a href="http://my.oschina.net/yumg/blog/388918">8. Sublime Text 3 安装 Package Control 组件 （设置HTTP代理）</a></li>
		  </ol>
</div>
<div class="Mod" id="BlogReplies">
  <strong> 最新评论</strong>  
    	<p class="NoData">目前还没有任何评论</p>
  </div>
<div class="Mod" id="Stat">
<strong>访客统计</strong>
<ul>
	<li><label>今日访问：</label>5</li>
    <li><label>昨日访问：</label>5</li>
    <li><label>本周访问：</label>17</li>
    <li><label>本月访问：</label>90</li>
    <li><label>所有访问：</label>808</li>
</ul>
</div></div>

<link rel="stylesheet" type="text/css" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/thinker-md.vendor.css">
<script src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/thinker-md.vendor.min.js" type="text/javascript"></script>


<div class="SpaceList">
	<div class="TopBar">
    	<div class="NavPath">
    		<a href="http://my.oschina.net/yumg/home">空间</a> » <a href="http://my.oschina.net/yumg/blog">博客</a>
			»
						<span class="catalogs">
    			<ul>
    										<li><a href="http://my.oschina.net/yumg/blog?catalog=3272944">SI Manual</a></li>
					        			        				<li><a href="http://my.oschina.net/yumg/blog?catalog=3280478">其它</a></li>    				        				<li><a href="http://my.oschina.net/yumg/blog?catalog=3287249">Splunk</a></li>    				        				<li><a href="http://my.oschina.net/yumg/blog?catalog=3331135">Ruby</a></li>    				        				<li><a href="http://my.oschina.net/yumg/blog?catalog=3378275">Kibana</a></li>    				        				    				        				<li><a href="http://my.oschina.net/yumg/blog?catalog=3298069">Logstash</a></li>    				    				        				<li><a href="http://my.oschina.net/yumg/blog">所有分类</a></li>
    				    			</ul>
			</span>
    	</div>
	</div>

    	<div class="BlogEntity">
      <div class="BlogTitle">
        <h1><span class="icon" style="background:#44ac57;" title="原创博客">原</span>															Spring Integration 中文手册 (2) </h1>
        <div class="BlogStat">
    		    		发表于10个月前(2015-03-23 18:16)&nbsp;&nbsp;
    		阅读（<span class="g">167</span>）&nbsp;|&nbsp;评论（<a href="http://my.oschina.net/yumg/blog/390486#comments"><span class="g">0</span></a>）
    					    	    <span class="admin">
				<style>
#TagsSwitcher{color:#A00;}
#RecTags,#MyTags{margin:5px 0;}
#RecTags a.tag{line-height:24px;}
#favor_form p:first-child{margin:5px 0;}
#favor_form{width:200px;}
#favor_form p {color:#666;}
#favor_form form{min-height: 85px;width:200px;}
#favor_form form ._favor_input{display:block;margin:2px 0;width:199px;}
#favor_form form ._favor_button{float:left;padding:2px 5px;}
.favor_ok {text-align:center;font-size:10.5pt;width:199px;height:60px;margin-top:10px;}
#TagsSwitcher{cursor:pointer;float:right;margin-top:10px;}
#MyTags{display:none;width:199px;}
#MyTags a.tag {float:left; background-color: #E0EAF1;border-bottom: 1px solid #3E6D8E;border-right: 1px solid #7F9FB6;color: #3E6D8E;font-size: 8pt;line-height: 16px;margin: 2px 2px 2px 0;padding: 2px 4px;text-decoration: none;white-space: nowrap;}
#MyTags a.tag:hover{background-color: #3E6D8E;color: #FFF;}
</style>
<script type="text/javascript">
var favor_add = "<a href='javascript:add_to_favor(390486,3)' id='favor_trigger' title='添加到收藏夹'>我要收藏</a>";
var favor_del = "<a href='javascript:delete_favor(390486,3)' id='favor_trigger' style='color:#a00;'>取消收藏</a>";
var favor_ok = "<p class='favor_ok'>已成功添加到收藏夹<br/><br/> <a href='null/favorites?type=3'>我的收藏夹</a> | <a href='javascript:close_favor()'>关闭</a></p>";
function delete_favor(obi_id, obj_type){
	$('#attention_it').html(favor_add);
	$("#p_attention_count").load("/action/favorite/cancel?type="+obj_type+"&id="+obi_id, {user: ''});
}
function add_to_favor(obj_id, obj_type){
	if(confirm('必须登录后才能收藏，是否现在登录？')){
		location.href="http://www.oschina.net/home/login?goto_page="+encodeURIComponent(location.href);
	}
}
function close_favor(elem_id){
    $('#favor_trigger').poshytip('destroy');
}
function setTag(tv){
	var t = $("._favor_input");
	var value = t.val();
	var tags = value.replace(/，/ig,',').split(',');
	var exist = false;
	value = $.map(tags,function(v,i){
		if($.trim(tv) == $.trim(v)){
			exist = true;
			return undefined;
		}
		return v;
	}).join(',');
	if(exist){
		t.val(value);
		return;
	}
	if(value!="")
		t.val(value+","+tv);
	else
		t.val(tv)
}
function ltrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(0)) != -1){
        var j=0, i = s.length;
        while (j < i && whitespace.indexOf(s.charAt(j)) != -1){
            j++;
        }
        s = s.substring(j, i);
    }
    return s;
}

function rtrim(str){
    var whitespace = new String(" \t\n\r");
    var s = new String(str);
    if (whitespace.indexOf(s.charAt(s.length-1)) != -1){
        var i = s.length - 1;
        while (i >= 0 && whitespace.indexOf(s.charAt(i)) != -1){
            i--;
        }
        s = s.substring(0, i+1);
    }
    return s;
}
 
function trim(str){
    return rtrim(ltrim(str));
}
</script>
<em id="p_attention_count">2</em>人收藏此文章,
<span id="attention_it">
	<script type="text/javascript">document.write(favor_add);</script><a href="javascript:add_to_favor(390486,3)" id="favor_trigger" title="添加到收藏夹">我要收藏</a>
</span>
<script type="text/javascript">
	$(document).ready(function(){
    	$.ajax({
    		url:"/action/favorite/attentionUsersCount",
    		type:"get",
    		data:"id="+390486+"&type="+3,
    		success:function(msg){
				$("#p_attention_count").html(msg);
    		}
    	});
	});
</script>			</span>
			    	</div>
		<div class="tvote" onclick="vote(390486)" title="都有1个人赞过了，你也来赞一下吧！不会扣积分哦！"><em class="vote">赞</em><em class="num vote_count">1</em></div>
      </div>
	  	  	  
	  	  <a name="markdown"></a>
	            <div class="BlogAbstracts">
						<em class="corner">摘要</em>
            <span>Spring Integration Reference Manual (4.1.2.Release) 章节部分-核心消息系统-消息通道</span>
						           <div class="BlogTags">
        	        	<a href="http://www.oschina.net/search?scope=blog&q=SpringIntegration" class="tag">SpringIntegration</a>
        	        	<a href="http://www.oschina.net/search?scope=blog&q=%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E9%9B%86%E6%88%90" class="tag">企业应用集成</a>
        	        	<a href="http://www.oschina.net/search?scope=blog&q=EAI" class="tag">EAI</a>
        	        	<a href="http://www.oschina.net/search?scope=blog&q=%E6%95%99%E7%A8%8B" class="tag">教程</a>
        	        	<a href="http://www.oschina.net/search?scope=blog&q=%E6%89%8B%E5%86%8C" class="tag">手册</a>
        	           </div>
		   		  </div><br>
	          	            <div class="BlogAnchor">
            <p><em class="corner" id="AnchorContentToggle" title="点击收起目录" style="cursor:pointer;">目录[-]</em></p>
            <div class="AnchorContent" id="AnchorContent"><li class="osc_h1"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h1_1">3.消息通道</a></li><li class="osc_h2"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h2_2">3.1 消息通道</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_3">3.1.1 消息通道的接口</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_4">3.1.1.1 PollableChannel</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_5">3.1.1.2 SubscribableChannel</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_6">3.1.2 消息通道的实现</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_7">3.1.2.1 PublishSubscribeChannel</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_8">3.1.2.2 QueueChannel</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_9">3.1.2.3 PriorityChannel</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_10">3.1.2.4 RendezvousChannel</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_11">3.1.2.5 DirectChannel</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_12">3.1.2.6 ExecutorChannel</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_13">3.1.2.7 Scoped Channel</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_14">3.1.3 通道拦截器</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_15">3.1.4 消息模板工具（MessagingTemplate）</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_16">3.1.5 配置消息通道</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_17">3.1.5.1 DirectChannel 配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_18">3.1.5.2 Datatype Channel 配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_19">3.1.5.3 QueueChannel 配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_20">3.1.5.4 PublishSubscribeChannel 配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_21">3.1.5.5 ExecutorChannel 配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_22">3.1.5.6 PriorityChannel 配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_23">3.1.5.7 RendezvousChannel 配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_24">3.1.5.8 Scoped Channel 配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_25">3.1.5.9 Channel Interceptor 配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_26">3.1.5.10 全局的消息通道拦截器配置</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_27">3.1.5.11 监听模式</a></li><li class="osc_h4"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h4_28">3.1.5.11 全局消息监听路由的配置</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_29">3.1.6 其它特殊的通道</a></li><li class="osc_h2"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h2_30">3.2 轮询器 (轮询型消费者）</a></li><li class="osc_h2"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h2_31">3.3 通道适配器</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_32">3.3.1 配置通道适配器</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_33">3.3.2 配置消息接出通道适配器（ Outbound Channel Adapter）</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_34">3.3.3 通道适配器中的表达式与脚本</a></li><li class="osc_h2"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h2_35">3.4 消息桥接</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_36">3.4.1 消息桥接简介</a></li><li class="osc_h3"><a href="http://my.oschina.net/yumg/blog/390486#OSC_h3_37">3.4.2 桥接配置</a></li></div>
    	  </div>
          <script>
		  	$(function(){
				$("#AnchorContentToggle").click(function(){
					var text = $(this).html();
					if(text=="目录[-]"){
						$(this).html("目录[+]");
						$(this).attr({"title":"展开"});
					}else{
						$(this).html("目录[-]");
						$(this).attr({"title":"收起"});
					}
					$("#AnchorContent").toggle();
				});
			});
		  </script>
	  	  	  	          <div class="BlogContent"><p><strong>原创翻译，版权所有 © YuMG</strong></p> 
<hr> 
<p><em>本章节部分将涵盖Spring Integration中核心消息API的所有方面。从这里，你会了解到关于“消息”、“消息通道以及“消息终端”。文中也将涉及许多企业集成模式，比如“过滤器”、“路由器”、“转换器”、“服务激发器”、“分解器”以及“聚合器”。本章节部分同样也包含了一些关于系统管理的材料，包括“控制总线”与“消息历史”方面的功能支持。</em></p> 
<span id="OSC_h1_1"></span>
<h1>3.消息通道</h1> 
<span id="OSC_h2_2"></span>
<h2>3.1 消息通道</h2> 
<p>尽管“消息”扮演着数据封装的关键角色，但别忘了解耦“消息生产者”和“消息消费者”的是“消息通道”。</p> 
<span id="OSC_h3_3"></span>
<h3>3.1.1 消息通道的接口</h3> 
<p>Spring Integration中顶层的<code>MessageChannel</code>接口被定义为如下所示：</p> 
<pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MessageChannel</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">send</span><span class="hljs-params">(Message message)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">send</span><span class="hljs-params">(Message message, <span class="hljs-keyword">long</span> timeout)</span></span>;
}
</code></pre> 
<p>当发送一条消息时，若发送成功则返回<code>true</code>；如果发送超时或者异常中断，则返回<code>false</code>。</p> 
<p>取决于消息通道是否缓存消息（如概述章节所述），存在两种子类型的接口：</p> 
<ul> 
 <li>可缓存消息的轮询（pollable）通道接口</li> 
 <li>不缓存消息的订阅（subscribable）通道接口</li> 
</ul> 
<span id="OSC_h4_4"></span>
<h4>3.1.1.1 PollableChannel</h4> 
<p>以下是<code>PollableChannel</code>的定义：</p> 
<pre><code class="hljs php"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">PollableChannel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MessageChannel</span> </span>{
    Message<span class="hljs-preprocessor">&lt;?</span>&gt; receive();
    Message<span class="hljs-preprocessor">&lt;?</span>&gt; receive(long timeout);
}
</code></pre> 
<p>与<code>send()</code>方法类似，当接收消息时，若超时或者异常中断，将返回<code>null</code>。</p> 
<span id="OSC_h4_5"></span>
<h4>3.1.1.2 SubscribableChannel</h4> 
<p>实现<code>SubscribableChannel</code>基本接口的通道会直接发送消息到订阅他们的消息处理器。所以，他们都不涉及供轮询的接收方法，取而代之的是管理订阅者的相关方法：</p> 
<pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">SubscribableChannel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MessageChannel</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">subscribe</span><span class="hljs-params">(MessageHandler <span class="hljs-keyword">handler</span>)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">unsubscribe</span><span class="hljs-params">(MessageHandler <span class="hljs-keyword">handler</span>)</span></span>;
}
</code></pre> 
<span id="OSC_h3_6"></span>
<h3>3.1.2 消息通道的实现</h3> 
<p>Spring Integration提供了许多不同类型的消息通道实现，以下是关于其中各种的概要描述。</p> 
<span id="OSC_h4_7"></span>
<h4>3.1.2.1 PublishSubscribeChannel</h4> 
<p><code>PublishSubscribeChannel</code>会广播消息到所有它的订阅者（消息处理器）。与通常只会被单一端点处理的“文档”型消息恰恰相反，这主要应用于发送“事件”型消息的场景。需要注意的是：<code>PublishSubscribeChannel</code>只能发送消息。当它的<code>send()</code>方法被调用时，它直接将消息广播给它的订阅者。而正由于此，消息消费者不能够自己轮询消息（通道没有实现<code>PollableChannel</code>接口，所以并不存在<code>receive()</code>方法）。此种情形下，所有的订阅者本身必须是<code>MessageHandler</code>，所有订阅者的<code>handleMessage(Message)</code>方法会被依次触发。</p> 
<blockquote> 
 <p>MessageHandler接口的相关说明在下文中会涉及。</p> 
</blockquote> 
<p>在3.0版本之前，调用<code>PublishSubscribeChannel</code>的<code>send()</code>方法，在不存在订阅者的情况下，会返回<code>false</code>。当结合消息模板（MessageTemplate）使用的时候会抛出<code>MessageDeliveryException</code>类型异常。从3.0版本以后（包括3.0），可以为通道设置“最少订阅者数量”（minSubscribers）属性，只要存在不少于该属性值的订阅者，那么就不会导致由于缺少订阅者而出错（该属性可以设置为0）。</p> 
<span id="OSC_h4_8"></span>
<h4>3.1.2.2 QueueChannel</h4> 
<p><code>QueueChannel</code>实现内部包装了一个队列。不同于<code>PublishSubscribeChannel</code>，<code>QueueChannel</code>有着“点对点”的语义。换句话讲，即使通道拥有多个消费者，发送到该通道上的消息也只能被其中的一个消费者获得。它提供了一个无参构造器和一个可以通过参数指定容量的构造器。（无参构造器其实是指定了无限容量——容量大小为<code>Integer.MAX_VALUE</code>）</p> 
<pre><code class="hljs aspectj"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">QueueChannel</span><span class="hljs-params">()</span></span>;
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">QueueChannel</span><span class="hljs-params">(<span class="hljs-keyword">int</span> capacity)</span></span>;
</code></pre> 
<p>当通道尚未达到它的容量上限时，它会将消息保存在它内部的队列里，此时对<code>send()</code>方法的调用将即刻返回，即使处理消息的接收者尚未就绪。如果队列达到了容量上限，那么消息发送者将会被阻塞直到释放出可用的空间。或者，如果对发送操作设置了超时时间，那么阻塞状态将会持续到空间释放或者超出设定时限。同理，对于接收方来讲，若队列中存有可用消息，那么对<code>recieve()</code>方法的调用也将即刻返回；但是如果队列是空的，那么对<code>recieve()</code>方法的调用将会被阻塞直到有新的消息出现或者等待超时。无论在何种情况下，如果传入一个值为“0”超时参数，那么都将强制方法立即返回。需要注意的是：调用无参的<code>send()</code>与<code>recieve()</code>方法，都可能会导致永久阻塞（永远都没有出现可用队列空间或者可用消息）。</p> 
<span id="OSC_h4_9"></span>
<h4>3.1.2.3 PriorityChannel</h4> 
<p>不同于<code>QueueChannel</code>强制暗含了“先进先出”（FIFO）的顺序，<code>PriorityChannel</code>实现了基于优先级的消息进出顺序。默认在消息头部，以‘property’属性的消息头属性值来确定优先级。不过，用户可以定义自己的优先级判定逻辑：<code>PriorityChannel</code>的构造器能够接受一个<code>Comparator&lt; Message&lt; ?&gt;&gt;</code>类型的比较器参数。</p> 
<span id="OSC_h4_10"></span>
<h4>3.1.2.4 RendezvousChannel</h4> 
<p><code>RendezvousChannel</code>所具备的功能开启了一种“手把手交付”的场景，在这种场景下消息发送者（接收者）将会一直阻塞，直到通道的另一端有消息接收者（发送者）接收（发送）消息。实质上，这种实现有点类似于基于容量为0的同步队列的<code>QueueChannel</code>。以上所述适用于消息发送者与消息接收者工作于不同线程，但又不便于使用异步队列交换消息的情况。换句话说，使用<code>RandezvousChannel</code>的情况下，消息发送者至少明确知道消息已被消息接收者收到。而若使用<code>QueueChannel</code>，消息只是被存放于队列中，至于何时被接收、最终是否被接收，就不得而知了。</p> 
<blockquote> 
 <p>提示： <br>需要记住的是：所有基于队列的消息通道都默认将消息存储于内存中。当有持久化需求时，可以选择为"queue"元素设置"message-store"属性，通过该属性引用一个带有持久化功能的<code>MessageStore</code>实现。或者，也可以选择使用一个带有持久化代理的通道实现，例如基于JMS的通道或者通道适配器。关于这些内容后续会有更详细的介绍。</p> 
</blockquote> 
<p><code>RendezvousChannel</code>同样适用于“请求-响应”式操作。消息发送者可以创建一个临时的、匿名的<code>RendezvousChannel</code>实例，然后创建消息时将该通道设置为消息的返回地址（通过<code>replyChannel</code>属性头）；将消息发送出去之后，消息发送者可以适机（立即或者延时一段时间）调用通道的<code>recieve()</code>方法，进而等待响应消息。</p> 
<span id="OSC_h4_11"></span>
<h4>3.1.2.5 DirectChannel</h4> 
<p><code>DirectChannel</code>有着“点对点”的语义，但是它却比上述任何基于队列实现的通道都更相似于<code>PublishSubscribeChannel</code>。它实现了<code>SubscribableChannel</code>接口而不是<code>PollableChannel</code>接口，所以它是将消息直接发送给订阅者的。但是，作为一种“点对点”通道，不同于一般的<code>PublishSubscribeChannel</code>实现的是，它仅将一条消息发送与一个订阅者，而非广播给所有订阅者。</p> 
<p>除了提供这种最简单的点对点通道模式以外，它最重要的特性在于：它可以使得消息“发送”与“接收”这两端的处理操作在同一个线程中执行。举例来说，如果某消息处理器订阅了一个“DirectChannel”，那么向该通道发送一条消息，将会导致直接在发送者的线程里触发消息处理器的<code>handleMessage(Message)</code>方法。</p> 
<p>提供此种通道实现的关键动机在于“受益于使用消息通道带来的抽象与松耦合的同时，也能够支持事务特性”。如果<code>send()</code>方法本身是在事务作用域范围内，那么消息处理器的执行结果（比如，是否成功更新一条数据库记录）将会影响到事务执行的最终结果（“提交”或是“回滚”）。</p> 
<blockquote> 
 <p>提示： <br>由于<code>DirectChannel</code>是最简单的一种通道，不需要诸如“调度”、“轮询器线程管理”等方面的任何附加配置，所以在Spring Integration中，该类型通道被认作为默认的消息通道。通常的实践经验是，在应用中先统统定义成缺省通道，然后再考虑其中哪些需要提供消息缓存或者输入限制功能，最后再将这些有特殊需求的通道修改为基于队列的<code>PollableChannels</code>类型实现。同样地，对于广播消息的需求，也应该进行修改，使用<code>PublishSubscribeChannel</code>而非<code>DirectChannel</code>。</p> 
</blockquote> 
<p><code>DirectChannel</code>内部委托“消息分发器”（Message Dispatcher）来调用订阅它的消息处理器。“消息分发器”的行为遵循了其内部设定的负载均衡策略，该策略可以通过<code>load-balancer</code>或者<code>load-balancer-ref</code>属性进行设置。当有多个消息订阅者订阅了同一个消息通道，那么该通道的“消息分发器”会通过负载均衡策略确定每条消息将由具体哪一个订阅者接收处理。为了方便使用，目前为<code>load-balancer</code>属性内置提供了：“round-robin”与“none”（不激活负载均衡）两种策略。当然也可以提供自定义的<code>LoadBalancingStrategy</code>实现，然后通过<code>load-balancer-ref</code>属性进行设置。</p> 
<pre><code class="hljs nimrod">&lt;<span class="hljs-type">int</span>:channel id=<span class="hljs-string">"lbRefChannel"</span>&gt;
  &lt;<span class="hljs-type">int</span>:dispatcher load-balancer-<span class="hljs-keyword">ref</span>=<span class="hljs-string">"lb"</span>/&gt;
&lt;/<span class="hljs-type">int</span>:channel&gt;

&lt;bean id=<span class="hljs-string">"lb"</span> class=<span class="hljs-string">"foo.bar.SampleLoadBalancingStrategy"</span>/&gt;
</code></pre> 
<p>注意：<code>load-balancer</code>属性与<code>load-balancer-ref</code>属性是互斥的。</p> 
<p>“负载均衡”选项同样也可以结合“故障转移”（Failover）选项一起使用。如果<code>failover</code>值为<code>true</code>（默认为true），那么当消息分发器遇到消息接收异常时将会接着尝试再向下一个处理器发送消息。故障转移的顺序由消息处理器确定（可选），如果消息处理器未给出该顺序，那么将遵从初始时的订阅顺序。</p> 
<p>如果某种特定的需求场景要求分发器总是先调用某一个处理器，然后按照一种固定的顺序完成故障转移，那么只要别设置任何负载均衡策略即可。换句话说，即使分发器并没有设置任何负载均衡策略，它仍然能够支持故障转移。</p> 
<blockquote> 
 <p>提示： <br>需要记住的是：“负载均衡”与“故障转移”只有在消息订阅者的数量大于1的时候才有效。</p> 
</blockquote> 
<span id="OSC_h4_12"></span>
<h4>3.1.2.6 ExecutorChannel</h4> 
<p><code>ExecutorChannel</code>是一种“点对点”的通道，它像<code>DirectChannel</code>一样支持消息分发器的配置（负载均衡策略与故障转移属性）。这两种分发消息的通道类型间最显著的区别在于：<code>ExecutorChannel</code>委托<code>TaskExecutor</code>实例来执行消息的分发工作。这不仅意味着<code>send()</code>方法不会再被阻塞，而且同时也意味着：消息处理器的调用不再发生在发送者的线程中。正因如此，横跨消息发送者与接受者之间的事务也不会再受到支持。</p> 
<blockquote> 
 <p>提示： <br>也存在有偶然的因素会导致发送者阻塞。比如，使用了设有类似<code>ThreadPoolExecutor.CallerRunsPolicy</code>“拒绝策略”的<code>TaskExecutor</code>时,发送者线程将会在线程池耗尽时，自己直接执行消息处理器中的方法。这种情况的出现是不可预测的。</p> 
</blockquote> 
<span id="OSC_h4_13"></span>
<h4>3.1.2.7 Scoped Channel</h4> 
<p>Spring Integration 1.0版本曾经提供了一种<code>ThreadLocalChannel</code>实现，但是在2.0版本时就被遗弃了。目前，存在一种更为通用的方式来处理类似的需求，那就是为通道添加<code>scope</code>属性。该属性的值可以是上下文中任何一个可用<code>Scope</code>的名字。例如，在Web环境中存在一些可用的<code>Scope</code>，以及任何注册在在上下文中自定义<code>Scope</code>。以下所示为设置了基于ThreadLocal的scope的通道示例，这个例子里也包括了<code>Scope</code>自身的注册。</p> 
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"threadScopedChannel"</span> <span class="hljs-attribute">scope</span>=<span class="hljs-value">"thread"</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-title">int:queue</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">int:channel</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.beans.factory.config.CustomScopeConfigurer"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"scopes"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">map</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">entry</span> <span class="hljs-attribute">key</span>=<span class="hljs-value">"thread"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"org.springframework.context.support.SimpleThreadScope"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">map</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>
</code></pre> 
<p>上例中的通道同样委托了内部的队列，但不同的是该通道被限定在当前线程中，所以消息队列的内容也处于当前线程内。发送消息的线程可以从通道中接收之前发送的消息，但其它线程却无法访问这些消息。尽管<code>thread-scoped</code>的通道极少被用到，但是当需要在单一线程中使用<code>DirectChannel</code>类型的通道同时又要将响应消息发送至一个“最终”通道中时，此种类型的通道可以起到作用。如果“最终”通道被限定在线程作用域，原始的发送者线程就可以从通道中收集响应结果。</p> 
<span id="OSC_h3_14"></span>
<h3>3.1.3 通道拦截器</h3> 
<p>消息驱动架构的优势之一就在于能够以一种普遍通用的且非侵入的方式来捕获到系统中所传输消息中有意义的信息。由于消息都是通过通道来传递的，那么正是通道提供了切入<code>send</code>与<code>receive</code>操作的机会。<code>ChannelInterceptor</code>策略接口为每种操作提供了切入方法：</p> 
<pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">ChannelInterceptor</span> </span>{
    Message&lt;?&gt; preSend(Message&lt;?&gt; message, MessageChannel channel);
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">postSend</span><span class="hljs-params">(Message&lt;?&gt; message, MessageChannel channel, <span class="hljs-keyword">boolean</span> sent)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afterSendCompletion</span><span class="hljs-params">(Message&lt;?&gt; message, MessageChannel channel, <span class="hljs-keyword">boolean</span> sent, Exception ex)</span></span>;
    <span class="hljs-function"><span class="hljs-keyword">boolean</span> <span class="hljs-title">preReceive</span><span class="hljs-params">(MessageChannel channel)</span></span>;
    Message&lt;?&gt; postReceive(Message&lt;?&gt; message, MessageChannel channel);
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afterReceiveCompletion</span><span class="hljs-params">(Message&lt;?&gt; message, MessageChannel channel, Exception ex)</span></span>;
}
</code></pre> 
<p>可以通过以下调用将拦截器实现注册到通道中：</p> 
<pre><code class="hljs">channel.addInterceptor(someChannelInterceptor);
</code></pre> 
<p><code>ChannelInterceptor</code>接口中返回<code>Message</code>实例的方法可被用于进行消息转换，或者如果返回<code>null</code>将会阻断消息下一步的处理操作（当然，任何方法都可以抛出<code>RuntimeException</code>异常也将阻断消息处理）。还有，如果<code>preReceive</code>方法返回<code>false</code>也会阻断消息流。</p> 
<blockquote> 
 <p>提示: <br>需要记住的是：仅有<code>PollableChannels</code>才有<code>receive()</code>方法，<code>SubscribableChannel</code>类型的通道是没有此方法的。所以，<code>preReceive(..)</code>方法与<code>postReceive(..)</code>方法仅当作用于<code>PollableChannel</code>时才有效。</p> 
</blockquote> 
<p>Spring Integration还提供了“窃听模式”（Wire Tap）的实现。其实质就是在不改变原消息流的前提下，将消息（副本）发送到另外一个通道的拦截器。这对于调试和监控来说是极其有用的。后续会有专门关于“窃听模式”的专题章节。</p> 
<p>由于通常并不需要实现拦截器的所有方法，Spring Integration提供了<code>ChannelInterceptorAdapter</code>类，该类实现了<code>ChannelInterceptor</code>接口，并默认覆写了其中所有方法（对于返回值<code>void</code>的方法做空实现；对于返回值为<code>Message</code>对象的方法则直接将传入消息原样返回；对于返回<code>boolean</code>值的方法则统统返回<code>true</code>）。如此以来，继承<code>ChannelInterceptorAdapter</code>仅实现需要实现的方法较直接实现<code>ChannelInterceptor</code>更为简单方便，比如下面的例子：</p> 
<pre><code class="hljs scala">public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CountingChannelInterceptor</span> <span class="hljs-keyword"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">ChannelInterceptorAdapter</span> {</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> sendCount = <span class="hljs-keyword">new</span> <span class="hljs-type">AtomicInteger</span>();

    <span class="hljs-annotation">@Override</span>
    public <span class="hljs-type">Message</span>&lt;?&gt; preSend(<span class="hljs-type">Message</span>&lt;?&gt; message, <span class="hljs-type">MessageChannel</span> channel) {
        sendCount.incrementAndGet();
        <span class="hljs-keyword">return</span> message;
    }
}
</code></pre> 
<blockquote> 
 <p>提示： <br>拦截器中的方法调用顺序取决于拦截器所作用于的具体通道类型。首先，如上所述，仅有基于队列实现的通道才会有对<code>receive()</code>方法的拦截。另外，对<code>send()</code>方法与<code>receive()</code>方法的拦截顺序取决于发送线程与接收线程的时间顺序。比如，如果接收者已经阻塞等待消息的情况下，那么拦截方法的顺序可能是：<code>preSend</code> <code>preReceive</code> <code>postReceive</code> <code>postSend</code>。但是，如果接收者在发送者已经将消息发送到队列上并已返回的情况下再去查询消息的话，那么拦截方法的执行顺序就可能变为：<code>preSend</code> <code>postSend</code> <code>preReceive</code> <code>postReceive</code>。综上看来，由于存在上述不确定性，所以程序逻辑不应该依赖拦截方法的执行顺序。</p> 
</blockquote> 
<p>从Spring Integration 4.1版本开始（依赖于Spring Framework4.1或更高版本），<code>ChannelInterceptor</code>提供了两个新方法——<code>afterSendCompletion()</code>与<code>afterReceiveCompletion()</code>。不管在发送或者接收过程中产生任何异常,它们都分别会在<code>send()</code>与<code>receive()</code>方法之后被调用，如此便于能够进行一些资源回收操作。</p> 
<span id="OSC_h3_15"></span>
<h3>3.1.4 消息模板工具（MessagingTemplate）</h3> 
<p>Spring Integration为应用提供了一套非侵入性的消息组件基础设置。可是，总会有一些情况下，让你不得不在应用代码中直接调用到消息系统。为了更方便的应对这种状况，SpringIntegration提供了<code>MessagingTemplate</code>来支持关于消息通道的各种操作，包括发送请求与等待响应的场景等。例如：</p> 
<pre><code class="hljs nimrod"><span class="hljs-type">MessagingTemplate</span> <span class="hljs-keyword">template</span> = new <span class="hljs-type">MessagingTemplate</span>();
<span class="hljs-type">Message</span> reply = <span class="hljs-keyword">template</span>.sendAndReceive(someChannel, new <span class="hljs-type">GenericMessage</span>(<span class="hljs-string">"test"</span>));
</code></pre> 
<p>模板还可以支持以下多种类型的方法：</p> 
<pre><code class="hljs r">public boolean send(final MessageChannel channel, final Message&lt;?&gt; message) { <span class="hljs-keyword">...</span> }
public Message&lt;?&gt; sendAndReceive(final MessageChannel channel, final Message&lt;?&gt; request) { .. }
public Message&lt;?&gt; receive(final PollableChannel&lt;?&gt; channel) { <span class="hljs-keyword">...</span> }
</code></pre> 
<span id="OSC_h3_16"></span>
<h3>3.1.5 配置消息通道</h3> 
<p>使用<code>&lt; channel /&gt;</code>元素声明可以创建一个消息通道实例：</p> 
<pre><code class="hljs objectivec">&lt;<span class="hljs-keyword">int</span>:channel <span class="hljs-keyword">id</span>=<span class="hljs-string">"exampleChannel"</span>/&gt;
</code></pre> 
<p>缺省的通道类型是“点对点”的。若要创建一个“发布订阅”类型的通道，可以使用<code>&lt; publish-subscribe-channel /&gt;</code>元素：</p> 
<pre><code class="hljs objectivec">&lt;<span class="hljs-keyword">int</span>:publish-subscribe-channel <span class="hljs-keyword">id</span>=<span class="hljs-string">"exampleChannel"</span>/&gt;
</code></pre> 
<p>当<code>&lt; channel /&gt;</code>元素不包含任何子元素时，将会创建一个<code>DirectChannel</code>实例（<code>SubscribableChannel</code>接口类型实现）。</p> 
<p>不过，为<code>&lt; channel /&gt;</code>元素提供<code>&lt; queue /&gt;</code>子元素则将会创建具备轮询能力的通道类型。更多的例子在下文展开。</p> 
<span id="OSC_h4_17"></span>
<h4>3.1.5.1 DirectChannel 配置</h4> 
<p>如上所述， <code>DirectChannel</code>作为默认通道类型，配置方式如下：</p> 
<pre><code class="hljs objectivec">&lt;<span class="hljs-keyword">int</span>:channel <span class="hljs-keyword">id</span>=<span class="hljs-string">"directChannel"</span>/&gt;
</code></pre> 
<p>缺省情况下，通道设置了“round-robin”负载均衡器，并且“failover”属性被设置为使能状态。改变以上配置可以通过添加<code>&lt; dispatcher /&gt;</code>子元素和设置对应属性来完成：</p> 
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"failFastChannel"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">int:dispatcher</span> <span class="hljs-attribute">failover</span>=<span class="hljs-value">"false"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">channel</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"channelWithFixedOrderSequenceFailover"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">int:dispatcher</span> <span class="hljs-attribute">load-balancer</span>=<span class="hljs-value">"none"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">int:channel</span>&gt;</span>
</code></pre> 
<span id="OSC_h4_18"></span>
<h4>3.1.5.2 Datatype Channel 配置</h4> 
<p>存在这么一种可能性，就是说消息消费者仅能处理特定类型的消息内容，所以要求你必须能够保证消息内容类型为预期类型。使用“消息过滤器”或者基于内容类型的“消息路由器”都可以满足上述需求。但是，使用“Datatype Channel”模式是一种更简单的应对方案。创建仅能接受某种特定内容类型消息的Datatype Channel的方法如下所示，为<code>&lt; channel&gt;</code>元素的<code>datatype</code>属性设置全限定类型名称即可。</p> 
<pre><code class="hljs nix">&lt;int:channel <span class="hljs-variable">id=</span><span class="hljs-string">"numberChannel"</span> <span class="hljs-variable">datatype=</span><span class="hljs-string">"java.lang.Number"</span>/&gt;
</code></pre> 
<p>需注意的是，在上个例子中，“numberChannel”会接受<code>java.lang.Integer</code>或者<code>java.lang.Double</code>类型的消息，因为通道所进行的类型比较是基于Java类型系统的。多类型的设置可以通过逗号分隔的列表来表示：</p> 
<pre><code class="hljs nix">&lt;int:channel <span class="hljs-variable">id=</span><span class="hljs-string">"stringOrNumberChannel"</span> <span class="hljs-variable">datatype=</span><span class="hljs-string">"java.lang.String,java.lang.Number"</span>/&gt;
</code></pre> 
<p>如果消息类型不在可接受范围内又会怎样呢？这取决于当前上下文中是否定义了名字为“integrationConversionService”并且实现了Spring<code>ConversionService</code>的bean。若没有，那么将会抛出异常；反之，将会使用“integrationConversionService”bean定义试图将消息内容转换为目标类型。</p> 
<p>你甚至可以注册自定义的转换器（ConversionService）。比方说，如果你直接使用上文中定义的“numberChannel”进行下列操作：</p> 
<pre><code class="hljs dart">MessageChannel inChannel = context.getBean(<span class="hljs-string">"numberChannel"</span>, MessageChannel.<span class="hljs-keyword">class</span>);
inChannel.send(<span class="hljs-keyword">new</span> GenericMessage&lt;<span class="hljs-built_in">String</span>&gt;(<span class="hljs-string">"5"</span>));
</code></pre> 
<p>不出意料地这将会导致抛出异常，错误日志如下：</p> 
<pre><code class="hljs stylus">expected one of the following datataypes [class java<span class="hljs-class">.lang</span><span class="hljs-class">.Number</span>],
Channel <span class="hljs-string">'numberChannel'</span>
expected one of the following datataypes [class java<span class="hljs-class">.lang</span><span class="hljs-class">.Number</span>],
but received [class java<span class="hljs-class">.lang</span><span class="hljs-class">.String</span>]
</code></pre> 
<p>不过，如果我们实现一个转换器将字符串类型转为整形，如下：</p> 
<pre><code class="hljs aspectj"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StringToIntegerConverter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Converter</span>&lt;<span class="hljs-title">String</span>, <span class="hljs-title">Integer</span>&gt; </span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function">Integer <span class="hljs-title">convert</span><span class="hljs-params">(String source)</span> </span>{
        <span class="hljs-function"><span class="hljs-keyword">return</span> Integer.<span class="hljs-title">parseInt</span><span class="hljs-params">(source)</span></span>;
    }
}
</code></pre> 
<p>然后将该转换器注册为Spring Integration的“Conversion Service”，如下：</p> 
<pre><code class="hljs nimrod">&lt;<span class="hljs-type">int</span>:<span class="hljs-keyword">converter</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">"strToInt"</span>/&gt;
&lt;bean id=<span class="hljs-string">"strToInt"</span> class=<span class="hljs-string">"org.springframework.integration.util.Demo.StringToIntegerConverter"</span>/&gt;
</code></pre> 
<p>当解析<code>converter</code>元素时，就会创建一个“integrationConversionService”命名的bean。在这个bean的作用下，可以将消息中字符串类型的内容转换为整数类型。</p> 
<span id="OSC_h4_19"></span>
<h4>3.1.5.3 QueueChannel 配置</h4> 
<p>使用带有<code>&lt; queue /&gt;</code>子元素的<code>&lt; channel /&gt;</code>元素可以创建一个<code>QueueChannel</code>，同时也可以设定通道的容量大小：</p> 
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"queueChannel"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">queue</span> <span class="hljs-attribute">capacity</span>=<span class="hljs-value">"25"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">int:channel</span>&gt;</span>
</code></pre> 
<blockquote> 
 <p>提示： <br>如果没有设置容量大小属性，那么通道的容量将默认为无限。为了避免类似与<code>OutOfMemoryErrors</code>的错误，建议为通道设置容量上限属性。</p> 
</blockquote> 
<p><strong>Persistent QueueChannel 配置</strong></p> 
<p>由于<code>QueueChannel</code>默认在内存中缓存消息，所以若发生系统故障可能会导致消息丢失。为了避免此类风险，可以使用带有持久化实现机制的<code>QueueChannel</code>。当队列通道收到消息后，它会把消息置于一个称为MessageStore的对象中。当消息被查询时，会被从MessageStore中移除掉。</p> 
<p>缺省情况下，MessageStore是基于内存的实现，但是Spring Integration也同样提供了持久化的store，比如<code>JdbcMesssageStore</code>。</p> 
<p>可以仿照下面的例子来为任何类型的<code>QueueChannel</code>设置message-store属性：</p> 
<pre><code class="hljs nimrod">&lt;<span class="hljs-type">int</span>:channel id=<span class="hljs-string">"dbBackedChannel"</span>&gt;
    &lt;<span class="hljs-type">int</span>:queue message-store=<span class="hljs-string">"channelStore"</span>/&gt;
&lt;/<span class="hljs-type">int</span>:channel&gt;

&lt;bean id=<span class="hljs-string">"channelStore"</span> class=<span class="hljs-string">"o.s.i.jdbc.store.JdbcChannelMessageStore"</span>&gt;
    &lt;property name=<span class="hljs-string">"dataSource"</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">"dataSource"</span>/&gt;
    &lt;property name=<span class="hljs-string">"channelMessageStoreQueryProvider"</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">"queryProvider"</span>/&gt;
&lt;/bean&gt;
</code></pre> 
<p>Spring Integration 中的 JDBC 模块提供了各种流行数据库相应的数据库支撑表定义脚本。脚本位于“spring-integration-jdbc”模块的<code>org.springframework.integration.jdbc.store.channel</code>包中。</p> 
<blockquote> 
 <p>注意： <br>这里有一个比较重要的特性是，对于任何事务性的持久化store来说（比如JdbcChannelMessageStore），只要消息查询者配置了事务支持，那么消息只有在整个事务成功提交后才会被从store中永久移除；反之，若事务回滚，消息并不会被丢失。</p> 
</blockquote> 
<p>随着与各种“NoSQL”数据库相关的Spring项目提供底层支持，将来会出现越来越多的“MessageStore”。当然，你也可以实现<code>MessageGroupStore</code>接口，进而使用自定义的“MessageStore”来满足个性化的需求。</p> 
<p>另外一项可以在<code>QueueChannel</code>通道类型环境下自定义的配置选项为<code>&lt; int:queue&gt;</code>子元素。此处可以引用任何<code>java.util.Queue</code>的实现类型。</p> 
<span id="OSC_h4_20"></span>
<h4>3.1.5.4 PublishSubscribeChannel 配置</h4> 
<p>使用<code>&lt; publish-subscribe-channel / &gt;</code>元素可以创建<code>PublishSubscribeChannel</code>类型通道。 当时用该通道时，同时也可以为“消息发布”定义<code>task-executor</code>（如果不设置该属性的话，发布发布消息的操作将会在在发送者的线程中执行）。</p> 
<pre><code class="hljs nix">&lt;int:publish-subscribe-channel <span class="hljs-variable">id=</span><span class="hljs-string">"pubsubChannel"</span> <span class="hljs-variable">task-executor=</span><span class="hljs-string">"someExecutor"</span>/&gt;
</code></pre> 
<p>如果在<code>PublishSubscribeChannel</code>的下游消息流中定义了<code>Resequencer</code>或者<code>Aggregator</code>，那么你可以为通道设置<code>apply-sequence</code>属性。如此将意味着通道将为发布的消息设置<code>sequence-size</code>与<code>sequence-number</code>以及“相关性的ID值”的消息头属性。比如，如果通道有5个订阅者，那么<code>sequence-size</code>属性将被设置为5，被发布的消息将依次具有范围1至5的<code>sequence-number</code>头部属性值。</p> 
<pre><code class="hljs nix">&lt;int:publish-subscribe-channel <span class="hljs-variable">id=</span><span class="hljs-string">"pubsubChannel"</span> <span class="hljs-variable">apply-sequence=</span><span class="hljs-string">"true"</span>/&gt;
</code></pre> 
<blockquote> 
 <p>注意： <br>默认情况下，<code>apply-sequence</code>属性值为<code>false</code>，这样<code>PublishSubscribeChannel</code>将为每个订阅者发送一模一样的消息。当该属性为<code>true</code>时，由于Spring Integration遵循“消息不变性”，所以通道将创建新的消息实例，这些新的实例都共同引用了原消息体，但各自具有新的消息头。</p> 
</blockquote> 
<span id="OSC_h4_21"></span>
<h4>3.1.5.5 ExecutorChannel 配置</h4> 
<p>若要创建<code>ExecutorChannel</code>，添加一个带有<code>task-executor</code>属性的<code>dispatcher</code>子元素即可。<code>task-executor</code>属性可以引用上下文中定义的任何<code>TaskExecutor</code>。如上文所述，<code>ExecutorChannel</code>的使用将会导致消息发送者与消息接收者之间的事务约定无效，因为它将两端的处理逻辑分隔在了两个线程中。</p> 
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"executorChannel"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">int:dispatcher</span> <span class="hljs-attribute">task-executor</span>=<span class="hljs-value">"someExecutor"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">int:channel</span>&gt;</span>
</code></pre> 
<blockquote> 
 <p>注意： <br>属性<code>load-balancer</code>与<code>failover</code>同样都还是可用的，属性性质与前文的<code>DirectChannle</code>一致：</p> 
 <pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"executorChannelWithoutFailover"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">int:dispatcher</span> <span class="hljs-attribute">task-executor</span>=<span class="hljs-value">"someExecutor"</span> <span class="hljs-attribute">failover</span>=<span class="hljs-value">"false"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">int:channel</span>&gt;</span>
</code></pre> 
</blockquote> 
<span id="OSC_h4_22"></span>
<h4>3.1.5.6 PriorityChannel 配置</h4> 
<p>使用<code>&lt; priority-queue / &gt;</code>子元素可以创建一个<code>PriorityChannel</code>。</p> 
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"priorityChannel"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">int:priority-queue</span> <span class="hljs-attribute">capacity</span>=<span class="hljs-value">"20"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">int:channel</span>&gt;</span>
</code></pre> 
<p>缺省地，通道将会参照消息头部的<code>priority</code>属性来确定消息的优先级。但是，也可以引用一个自定义的优先级<code>Comparator</code>来判定消息优先级。下例中展示了一个支持类型过滤与设定了通道容量的例子：</p> 
<pre><code class="hljs nix">&lt;int:channel <span class="hljs-variable">id=</span><span class="hljs-string">"priorityChannel"</span> <span class="hljs-variable">datatype=</span><span class="hljs-string">"example.Widget"</span>&gt;
    &lt;int:priority-queue <span class="hljs-variable">comparator=</span><span class="hljs-string">"widgetComparator"</span> <span class="hljs-variable">capacity=</span><span class="hljs-string">"10"</span>/&gt;
&lt;/int:channel&gt;
</code></pre> 
<p>从4.0版本开始，优先级通道支持设置<code>message-store</code>选项（这种情况下不知道设置自定义优先级判定器）。消息Store必须是<code>PriorityCapableChannelMessageStore</code>类型。当前<code>PriorityCapableChannelMessageStore</code>能够支持Redis、JDBC以及MongoDB。</p> 
<span id="OSC_h4_23"></span>
<h4>3.1.5.7 RendezvousChannel 配置</h4> 
<p>当<code>channel</code>元素附有<code>&lt; rendezvous-queue &gt;</code>子元素时，将会创建<code>RendezvousChannel</code>实例。<code>RendezvousChannel</code>不接受关于通道队列容量大小的设置，因为它实质上包含了一个容量大小为0的直接交付的队列。</p> 
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"rendezvousChannel"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">int:rendezvous-queue</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">int:channel</span>&gt;</span>
</code></pre> 
<span id="OSC_h4_24"></span>
<h4>3.1.5.8 Scoped Channel 配置</h4> 
<p>Scoped Channel 的配置方式如下：</p> 
<pre><code class="hljs d">&lt;<span class="hljs-keyword">int</span>:channel id=<span class="hljs-string">"threadLocalChannel"</span> <span class="hljs-keyword">scope</span>=<span class="hljs-string">"thread"</span>/&gt;
</code></pre> 
<span id="OSC_h4_25"></span>
<h4>3.1.5.9 Channel Interceptor 配置</h4> 
<p>为<code>&lt; channel &gt;</code>元素设置<code>&lt; interceptors &gt;</code>子元素，将为消息通道设置拦截器。如下：</p> 
<pre><code class="hljs nimrod">&lt;<span class="hljs-type">int</span>:channel id=<span class="hljs-string">"exampleChannel"</span>&gt;
    &lt;<span class="hljs-type">int</span>:interceptors&gt;
        &lt;<span class="hljs-keyword">ref</span> bean=<span class="hljs-string">"trafficMonitoringInterceptor"</span>/&gt;
    &lt;/<span class="hljs-type">int</span>:interceptors&gt;
&lt;/<span class="hljs-type">int</span>:channel&gt;
</code></pre> 
<p>一个拦截器实现可以被多个通道共用。</p> 
<span id="OSC_h4_26"></span>
<h4>3.1.5.10 全局的消息通道拦截器配置</h4> 
<p>通道拦截器提供了一种简单明了的手段来横切每个消息通道的行为。如果需要对一批通道进行普遍的横切，那么一个挨一个地重复同样的配置显然缺乏效率。为了更有效率地应对上述情况，Spring Integration提供了“全局拦截器”的概念。例如下面的配置：</p> 
<pre><code class="hljs cs">&lt;<span class="hljs-keyword">int</span>:channel-interceptor pattern=<span class="hljs-string">"input*, bar*, foo"</span> order=<span class="hljs-string">"3"</span>&gt;
    &lt;bean <span class="hljs-keyword">class</span>=<span class="hljs-string">"foo.barSampleInterceptor"</span>/&gt;
&lt;/<span class="hljs-keyword">int</span>:channel-interceptor&gt;
</code></pre> 
<p>或者：</p> 
<pre><code class="hljs nimrod">&lt;<span class="hljs-type">int</span>:channel-interceptor <span class="hljs-keyword">ref</span>=<span class="hljs-string">"myInterceptor"</span> pattern=<span class="hljs-string">"input*, bar*, foo"</span> order=<span class="hljs-string">"3"</span>/&gt;
&lt;bean id=<span class="hljs-string">"myInterceptor"</span> class=<span class="hljs-string">"foo.barSampleInterceptor"</span>/&gt;
</code></pre> 
<p>使用<code>&lt; channel-interceptor / &gt;</code>元素将能够定义一个全局的拦截器，作用于与<code>pattern</code>属性匹配的所有通道。上例中的全局拦截器将作用于名称为“foo”以及所有以“bar”和“input”名称开头的通道。<code>order</code>属性设置了拦截器的作用顺序，如果通道上被设置了多个拦截器的话。比如所下面的例子展示了“input”通道自身已被定义了局部的拦截器：</p> 
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"inputChannel"</span>&gt;</span> 
  <span class="hljs-tag">&lt;<span class="hljs-title">int:interceptors</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">int:wire-tap</span> <span class="hljs-attribute">channel</span>=<span class="hljs-value">"logger"</span>/&gt;</span> 
  <span class="hljs-tag">&lt;/<span class="hljs-title">int:interceptors</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">int:channel</span>&gt;</span>
</code></pre> 
<p>那么通道上被设置的所有拦截器（局部本地设置的以及全局设置的）究竟会按照什么顺序来发挥作用呢？目前的实现提供了一项非常简单的机制：拦截器的<code>order</code>属性值将会确定其执行顺序，该值越小那么对应拦截器的顺序将会越靠前。</p> 
<blockquote> 
 <p>提示： <br><code>order</code>属性值默认为‘0’；<code>pattern</code>属性值默认为‘*’。</p> 
</blockquote> 
<span id="OSC_h4_27"></span>
<h4>3.1.5.11 监听模式</h4> 
<p>正如上文中所提到的，Spring Integration提供了开箱即用的“监听模式”拦截器。可以在任何通道的<code>&lt; interceptors / &gt;</code>元素中配置消息监听路由。这样的配置对于程序调式来说是非常适用的，也可以配合Spring Integration中的日志通道适配器来使用。比如下例所示：</p> 
<pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">int:channel</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"in"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">int:interceptors</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">int:wire-tap</span> <span class="hljs-attribute">channel</span>=<span class="hljs-value">"logger"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">int:interceptors</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">int:channel</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">int:logging-channel-adapter</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"logger"</span> <span class="hljs-attribute">level</span>=<span class="hljs-value">"DEBUG"</span>/&gt;</span>
</code></pre> 
<blockquote> 
 <p>提示 <br>通过使用SpEL表达式为<code>logging-channel-adapter</code>设置<code>expression</code>属性，可以过滤消息内部的具体内容，比如消息头部中的属性或者是消息体中的具体某项内容。另外，也可以直接设置<code>log-full-message</code>属性为<code>true</code>，就可以令日志记录包括所有的消息内容（该值默认为<code>false</code>，仅有消息体会被记录）。</p> 
</blockquote> 
<p><strong>关于监听模式进一步说明</strong></p> 
<p>大部分人可能想当然地认为消息监听路由自然是异步的。可事实并非如此，Spring Integration中确定某个消息操作是否异步（或者同步）的关键角色在于“消息通道”。不同的通道类型会使得消息处理遵循不同的方式，这也是将将消息通道抽象化的优势之一。自从Spring Integration框架创建之初，消息通道一直就被强调为框架中的“一等公民”。它不仅仅只是一个内部的、隐含的对“企业集成模式”的实现，并且更重要地，它是对于用户完全开放、可按需配置的消息部件。</p> 
<p>所以，消息监听路由仅仅负责以下三项工作：</p> 
<ul> 
 <li>拦截进入通道的消息</li> 
 <li>抓取消息</li> 
 <li>将消息发送到另外的监听通道上</li> 
</ul> 
<p>那么，关于被路由监听得到的消息究竟是同步的还是异步的呢？这取决与监听通道本身的配置。</p> 
<p>最后需要指出的一点是，一般的实践中，诸如监听路由性质的工作，应当尽量不要产生阻塞。所以，为此通常应该选用异步效果的消息通道。当然，也有一些个别原因使得我们必须考虑同步消息，比如说，我们为了审计而必须保证消息监听路由被包含在事务边界以内。</p> 
<span id="OSC_h4_28"></span>
<h4>3.1.5.11 全局消息监听路由的配置</h4> 
<p>正如配置全局消息通道拦截器一样，也可以配置全局的消息监听路由。如下：</p> 
<pre><code class="hljs nix">&lt;int:wire-tap <span class="hljs-variable">pattern=</span><span class="hljs-string">"input*, bar*, foo"</span> <span class="hljs-variable">order=</span><span class="hljs-string">"3"</span> <span class="hljs-variable">channel=</span><span class="hljs-string">"wiretapChannel"</span>/&gt;
</code></pre> 
<span id="OSC_h3_29"></span>
<h3>3.1.6 其它特殊的通道</h3> 
<p>在Spring Integration名字空间有效的情况下，在应用上下文中存在两种特殊的通道：</p> 
<ul> 
 <li><code>nullChannel</code></li> 
 <li><code>errorChannel</code></li> 
</ul> 
<p><code>nullChannel</code>的含义就像“/dev/null”一样。“nullChannel”这个名称，在上下文中是保留字，可以直接使用。而<code>errorChannel</code>则是专门用来投递出错消息，在框架内部被用来传递出错消息，而且它可以被自定配置重写覆盖。</p> 
<span id="OSC_h2_30"></span>
<h2>3.2 轮询器 (轮询型消费者）</h2> 
<p>当消息终端连接到消息通道上并被初始化后产生的实例对象类型为下述两者之一：</p> 
<ul> 
 <li>PollingConsumer：轮询型消费者</li> 
 <li>EventDrivenConsumer：事件驱动型消费者</li> 
</ul> 
<p>到底是二者中的哪一种取决于消息终端连接的通道类型。如果连接的通道是<code>org.springframework.integration.core.SubscribableChannel</code>接口实现，那么将会生成<code>EventDrivenConsumer</code>类型的消费者实例；相对应地，如果连接的通道是<code>org.springframework.integration.core.PollableChannel</code>接口的实现，那么将会生成<code>PollingConsumer</code>类型的消费者实例。</p> 
<p>轮询型消费者是通过主动地查询来获取消息而不是被动地依靠“事件驱动”的方式。</p> 
<p>关于轮询消费者更多的理论，可以参照《EIP》中的论述：http://www.enterpriseintegrationpatterns.com/PollingConsumer.html</p> 
<p>更进一步地，Spring Integration中提供了轮询消费者模式的另一种变体模式。在使用“接入通道适配器”（Inbound Channel Adapter）的情况下，这些适配器通常会使用<code>SourcePollingChannelAdapter</code>进行封装。例如，当需要从一个远程FTP服务器收取消息时， “FTP Inbound Channel Adapter”会被配置一个轮询器来周期性地查询消息。</p> 
<p>这意味着轮询器既可以被用于“接入消息”（inbound）也可以被用于“接出消息”（outbond）的场景。以下列举了一些场景例子：</p> 
<ul> 
 <li>轮询外部的系统，比如FTP Servers, Databases 或者 Web Services</li> 
 <li>轮询内部的通道</li> 
 <li>轮询内部的服务，比如某些Java Class中的某些方法</li> 
</ul> 
<p>本小节仅仅是概要地介绍了轮询型消费者，以及它们与消息通道间的相互作用。更详细的内容会在下文相应章节继续展开。</p> 
<span id="OSC_h2_31"></span>
<h2>3.3 通道适配器</h2> 
<p>通道适配器（Channel Adapter）是一种可以将（单独一个）消息发送者或者消息接收者与消息通道建立连接的消息终端。Spring Integration提供了许多开箱即用的消息通道适配器来支持多种类型的传输端口，比如JMS、File、HTTP、Web Service、Mail，等等（后续将有专门介绍该部分内容的章节）。本小节内容重点介绍一种简单却又广泛被应用的“方法调用”通道适配器。该类适配器可适用于“接入”（Inbound）消息与“接出”（Outbound）消息两种场景，并且都可以通过XML名字空间来进行配置。</p> 
<span id="OSC_h3_32"></span>
<h3>3.3.1 配置通道适配器</h3> 
<p><code>inbound-channel-adapter</code>元素可以调用某个Spring（上下文中）对象上的任何方法，并且将方法的返回值转换为“消息”后发送到对应的消息通道上。一旦适配器被激活，那么适配器的轮询器将开始工作，试图从消息源中收取消息。轮询器的执行策略将按照配置中设定的<code>TaskScheduler</code>来进行。通道适配器以及适配器的轮询器和轮询策略的配置样例如下所示：</p> 
<pre><code class="hljs nimrod">&lt;<span class="hljs-type">int</span>:inbound-channel-adapter <span class="hljs-keyword">ref</span>=<span class="hljs-string">"source1"</span> <span class="hljs-keyword">method</span>=<span class="hljs-string">"method1"</span> channel=<span class="hljs-string">"channel1"</span>&gt;
    &lt;<span class="hljs-type">int</span>:poller fixed-rate=<span class="hljs-string">"5000"</span>/&gt;
&lt;/<span class="hljs-type">int</span>:inbound-channel-adapter&gt;

&lt;<span class="hljs-type">int</span>:inbound-channel-adapter <span class="hljs-keyword">ref</span>=<span class="hljs-string">"source2"</span> <span class="hljs-keyword">method</span>=<span class="hljs-string">"method2"</span> channel=<span class="hljs-string">"channel2"</span>&gt;
    &lt;<span class="hljs-type">int</span>:poller cron=<span class="hljs-string">"30 * 9-17 * * MON-FRI"</span>/&gt;
&lt;/<span class="hljs-type">int</span>:channel-adapter&gt;
</code></pre> 
<blockquote> 
 <p>提示： <br>如果没有为通道适配器配置轮询器，那么必须在全局上下文中注册一个缺省的轮询器。</p> 
 <blockquote> 
  <p><strong>关于轮询器的配置的重点说明：</strong> <br>对于一般用于从消息源中轮询消息的轮询器来说（比如调用某个生成消息内容的服务方法），其配置样例如下：</p> 
  <pre><code class="hljs vim">&lt;in<span class="hljs-variable">t:poller</span> <span class="hljs-built_in">max</span>-<span class="hljs-keyword">messages</span>-per-poll=<span class="hljs-string">"1"</span> fixed-rate=<span class="hljs-string">"1000"</span>/&gt;
&lt;in<span class="hljs-variable">t:poller</span> <span class="hljs-built_in">max</span>-<span class="hljs-keyword">messages</span>-per-poll=<span class="hljs-string">"10"</span> fixed-rate=<span class="hljs-string">"1000"</span>/&gt;
</code></pre> 
  <p>上例中第一种配置里，由于<code>max-messages-per-poll</code>属性设置为1，所以每次轮询会激发轮询任务执行一次；而第二种配置里，则每次轮询会激发轮询任务执行10次，或者终止于10次以内返回<code>null</code>的情形。在这两种配置里，轮询激发会每隔1秒钟间歇发生一次（<code>fixed-rate=“1000”</code>）。</p> 
  <pre><code class="hljs cs">&lt;<span class="hljs-keyword">int</span>:poller <span class="hljs-keyword">fixed</span>-rate=<span class="hljs-string">"1000"</span>/&gt;
</code></pre> 
  <p>如果像上例一样，不设置<code>max-messages-per-poll</code>属性。那么这意味着每次轮询激发，都会一直执行轮询任务直到被轮询的方法调用返回<code>null</code>。其实，这是<code>max-messages-per-poll</code>属性值设置为“-1”的效果（默认值即为“-1”）。</p> 
  <pre><code class="hljs vim">&lt;in<span class="hljs-variable">t:poller</span> <span class="hljs-built_in">max</span>-<span class="hljs-keyword">messages</span>-per-poll=<span class="hljs-string">"-1"</span> fixed-rate=<span class="hljs-string">"1000"</span>/&gt;
</code></pre> 
 </blockquote> 
</blockquote> 
<span id="OSC_h3_33"></span>
<h3>3.3.2 配置消息接出通道适配器（ Outbound Channel Adapter）</h3> 
<p><code>outbound-channel-adapter</code>元素将创建一个消息通道，该通道会把通道内的消息内容作为参数来调用指定的POJO消费者方法。配置方法如如下例所示：</p> 
<pre><code class="hljs nimrod">&lt;<span class="hljs-type">int</span>:outbound-channel-adapter channel=<span class="hljs-string">"channel1"</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">"target"</span> <span class="hljs-keyword">method</span>=<span class="hljs-string">"handle"</span>/&gt;
&lt;beans:bean id=<span class="hljs-string">"target"</span> class=<span class="hljs-string">"org.Foo"</span>/&gt;
</code></pre> 
<p>如果被适配的是<code>PollableChannel</code>通道类型，那么需要提供一个关于轮询器配置的子元素，如下：</p> 
<pre><code class="hljs nimrod">&lt;<span class="hljs-type">int</span>:outbound-channel-adapter channel=<span class="hljs-string">"channel2"</span> <span class="hljs-keyword">ref</span>=<span class="hljs-string">"target"</span> <span class="hljs-keyword">method</span>=<span class="hljs-string">"handle"</span>&gt;
    &lt;<span class="hljs-type">int</span>:poller fixed-rate=<span class="hljs-string">"3000"</span>/&gt;
&lt;/<span class="hljs-type">int</span>:outbound-channel-adapter&gt;

&lt;beans:bean id=<span class="hljs-string">"target"</span> class=<span class="hljs-string">"org.Foo"</span>/&gt;
</code></pre> 
<p>当然，POJO消费者也可以定义在<code>&lt; outbound-channel-adapter &gt;</code>内部:</p> 
<pre><code class="hljs nimrod">&lt;<span class="hljs-type">int</span>:outbound-channel-adapter channel=<span class="hljs-string">"channel"</span> <span class="hljs-keyword">method</span>=<span class="hljs-string">"handle"</span>&gt;
    &lt;beans:bean class=<span class="hljs-string">"org.Foo"</span>/&gt;
&lt;/<span class="hljs-type">int</span>:outbound-channel-adapter&gt;
</code></pre> 
<blockquote> 
 <p>提示： <br>不允许同时使用“引用属性”与“内部定义”的方式来设置POJO消费者。</p> 
</blockquote> 
<p>任何通道适配器都可以不设置<code>channel</code>引用，这种情况下会隐含创建一个<code>DirectChannel</code>类型的实例。并且该实例的名称取自相应通道适配器的<code>id</code>属性，也由于此方面的原因，该种情况下，通道适配器的<code>id</code>属性是必须设置的。</p> 
<span id="OSC_h3_34"></span>
<h3>3.3.3 通道适配器中的表达式与脚本</h3> 
<p>正如Spring Integration中的其它组件一样，<code>&lt; inbound-channel-adapter &gt;</code> 与 <code>&lt; outbound-channel-adapter &gt;</code> 同样支持SpEL表达式赋值。另外，从3.0版本开始，可以支持设置<code>&lt; script &gt;</code>子元素。关于该部分内容的详细说明将会在后续相应章节开展。</p> 
<span id="OSC_h2_35"></span>
<h2>3.4 消息桥接</h2> 
<span id="OSC_h3_36"></span>
<h3>3.4.1 消息桥接简介</h3> 
<p>“消息桥接”是一种能够在两个消息通道或者通道适配器之间建立连接的居间消息终端。比如说，你可能会想到将一个<code>PollableChannel</code>与一个<code>SubscribableChannel</code>连接起来，这样就可以使得订阅终端享用到任何轮询功能配置了。使用“消息桥接”就可以达到如此目的。</p> 
<p>使用消息桥接在两个通道之间设置一个中间轮询器，可以起到限制消息的流速。因为轮询器的触发速率与<code>maxMessagesPerPoll</code>属性将会强制限制消息的吞吐速率。</p> 
<p>另外一种关于消息桥接的合理用法是连接两种不同的系统。如果这两个系统间不需要格式转换的话，直接使用消息桥接会更有效率。</p> 
<span id="OSC_h3_37"></span>
<h3>3.4.2 桥接配置</h3> 
<p>使用<code>&lt; bridge &gt;</code>元素将创建一个消息桥接。被连接的消息通道通过元素中的<code>input-channel</code>与<code>output-channel</code>属性来进行设置，如下例所示：</p> 
<pre><code class="hljs nix">&lt;int:bridge <span class="hljs-variable">input-channel=</span><span class="hljs-string">"input"</span> <span class="hljs-variable">output-channel=</span><span class="hljs-string">"output"</span>/&gt;
</code></pre> 
<p>连接<code>PollableChannel</code>与<code>SubscribableChannel</code>的桥接配置如下所示：（该配置中桥接同样起到限速器的作用）</p> 
<pre><code class="hljs vim">&lt;in<span class="hljs-variable">t:bridge</span> <span class="hljs-built_in">input</span>-channel=<span class="hljs-string">"pollable"</span> output-channel=<span class="hljs-string">"subscribable"</span>&gt;
     &lt;in<span class="hljs-variable">t:poller</span> <span class="hljs-built_in">max</span>-<span class="hljs-keyword">messages</span>-per-poll=<span class="hljs-string">"10"</span> fixed-rate=<span class="hljs-string">"5000"</span>/&gt;
 &lt;/in<span class="hljs-variable">t:bridge</span>&gt;
</code></pre> 
<p>桥接通道适配器也同样简单。下面的例子中，展示连接名为“stdin”与“stdout”两适配器的情况（这两种适配器是Spring Integration的“stream”名字空间提供的）：</p> 
<pre><code class="hljs objectivec">&lt;<span class="hljs-keyword">int</span>-stream:stdin-channel-adapter <span class="hljs-keyword">id</span>=<span class="hljs-string">"stdin"</span>/&gt;

&lt;<span class="hljs-keyword">int</span>-stream:stdout-channel-adapter <span class="hljs-keyword">id</span>=<span class="hljs-string">"stdout"</span>/&gt;

&lt;<span class="hljs-keyword">int</span>:bridge <span class="hljs-keyword">id</span>=<span class="hljs-string">"echo"</span> input-channel=<span class="hljs-string">"stdin"</span> output-channel=<span class="hljs-string">"stdout"</span>/&gt;
</code></pre> 
<blockquote> 
 <p>提示： <br>如果桥接的<code>output-channel</code>属性没有被设置，那么将参照流经消息的<code>reply-channel</code>属性值来传递消息。若获取<code>reply-channel</code>未果，那么将会导致抛出异常。</p> 
</blockquote> 
<hr> 
<p><strong>原创翻译，版权所有 © YuMG</strong></p></div>
      	        	      	<div class="BlogShare">
    	
		<strong>分享到：</strong>
		<a class="share_sina" title="分享到新浪微博" href="javascript:void((function(s,d,e,r,l,p,t,z,c){var%20f='http://v.t.sina.com.cn/share/share.php?appkey=858381728',u=z||d.location,p=['&url=',e(u),'&title=',e(t||d.title),'&source=',e(r),'&sourceUrl=',e(l),'&content=',c||'gb2312','&pic=',e(p||'')].join('');function%20a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=440,height=430,left=',(s.width-440)/2,',top=',(s.height-430)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent,'','','','Spring Integration 中文手册 (2) : 原创翻译，版权所有 © YuMG 本章节部分将涵盖Spring Integration中核心消息API的所有方面。从这里，你会了解到关于“消息”、“消息通道以及“消息终端”。文中也将涉及...','','utf-8'));">
			<img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/sinaweibo_fb1.png" height="29">
		</a>
		<a class="share_qq" title="分享到腾讯微博" href="javascript:(function(){window.open('http://v.t.qq.com/share/share.php?url='+encodeURIComponent(document.location)+'&appkey=96f54f97c4de46e393c4835a266207f4&site=&title='+encodeURIComponent(document.title)+encodeURIComponent(': 原创翻译，版权所有 © YuMG 本章节部分将涵盖Spring Integration中核心消息API的所有方面。从这里，你会了解到关于“消息”、“消息通道以及“消息终端”。文中也将涉及...'),'', 'width=450, height=400, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no');}())">
			<img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/tencent_weibo_fb.jpg" height="30">
		</a>
    	<span class="BlogVote" onclick="vote(390486)" title="都有1个人赞过了，你也来赞一下吧！不会扣积分哦！">
			<span class="num vote_count">1</span><span class="vote">赞</span>
		</span>
	</div>

      <div class="BlogCopyright">
	  		声明：OSCHINA 博客文章版权属于作者，受法律保护。未经作者同意不得转载。
	  	  </div>
	  
      <div class="BlogLinks">
    	<ul>
                <li class="prev"><a href="http://my.oschina.net/yumg/blog/389412" title="上一篇：Lucene 5.0 代码样例">« 上一篇</a></li>        <li class="next"><a href="http://my.oschina.net/yumg/blog/398468" title="下一篇：Splunk数据处理概要">下一篇 »</a></li>    	</ul>
      </div>
	</div>
	       <div style="margin:10px 0;">
    	<script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/blog"></script><script async="" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/adsbygoogle.js"></script>
<!-- blog-ad -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-1307862221338762" data-ad-slot="4302558928" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><ins id="aswift_0_anchor" style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent"><iframe width="728" height="90" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;"></iframe></ins></ins></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>

      </div>
      </div>
<div class="recruitment recruitment-blog" style="margin-top:20px;height:200px">
	<div class="recruit-heading">
		<div class="title">
			最新热门职位
		</div>
		<div class="more">
			更多开发者职位上
			<a href="http://job.oschina.net/" target="_blank" class="link">开源中国·招聘</a>
		</div>
	</div>
	<div class="recruit-body">
		<ul>
									<li>
				<div class="logo-img">
					<a href="http://job.oschina.net/position/8724_2438273_19297" target="_blank">
										<img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/26131251_d3ch2438273.png">
										</a>
				</div>
				<div class="info-list">
					<div>
						<a href="http://job.oschina.net/position/8724_2438273_19297" target="_blank">	软件测试工程师
</a>
						<a href="http://job.oschina.net/company/2438273_8724" target="_blank">
							<small>启明软件
</small>
						</a>
					</div>
					<h5>
						月薪：
						<span class="font-red">6-10K</span>
					</h5>
				</div>
			</li>
												<li>
				<div class="logo-img">
					<a href="http://job.oschina.net/position/10029_2561941_22718" target="_blank">
										<img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/23160037_55vr2561941.jpeg">
										</a>
				</div>
				<div class="info-list">
					<div>
						<a href="http://job.oschina.net/position/10029_2561941_22718" target="_blank">	运维开发工程师
</a>
						<a href="http://job.oschina.net/company/2561941_10029" target="_blank">
							<small>百姓网
</small>
						</a>
					</div>
					<h5>
						月薪：
						<span class="font-red">10-20K</span>
					</h5>
				</div>
			</li>
												<li>
				<div class="logo-img">
					<a href="http://job.oschina.net/position/6039_2267230_23216" target="_blank">
										<img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/01170536_hk2w2267230.png">
										</a>
				</div>
				<div class="info-list">
					<div>
						<a href="http://job.oschina.net/position/6039_2267230_23216" target="_blank">	高级IOS开发工程师
</a>
						<a href="http://job.oschina.net/company/2267230_6039" target="_blank">
							<small>喔噻科技
</small>
						</a>
					</div>
					<h5>
						月薪：
						<span class="font-red">15-25K</span>
					</h5>
				</div>
			</li>
												<li>
				<div class="logo-img">
					<a href="http://job.oschina.net/position/6039_2267230_23214" target="_blank">
										<img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/01170536_hk2w2267230.png">
										</a>
				</div>
				<div class="info-list">
					<div>
						<a href="http://job.oschina.net/position/6039_2267230_23214" target="_blank">	高级JAVA开发工程师
</a>
						<a href="http://job.oschina.net/company/2267230_6039" target="_blank">
							<small>喔噻科技
</small>
						</a>
					</div>
					<h5>
						月薪：
						<span class="font-red">15-25K</span>
					</h5>
				</div>
			</li>
								</ul>
	</div>
	<div class="clear"></div>
</div>
<style>
	/*招聘广告位--样式*/
	.clear{
		clear:both;
		font-size:1px;
		line-height: 0;
	}
	.recruitment{
		font-size: 14px;
		border:1px solid #eee;
		color: #333;
		margin: 20px 0 0 230px;
		border: 1px solid #eee;
		background: #fff;
		word-wrap: break-word;
	}
	.recruitment a{
			text-decoration: none;
			color: #333;
		}
		.recruitment a:hover{
			text-decoration: none;
			color: #459120;
		}
		.recruitment ul,.recruitment li{
			list-style-type: none;
			padding:0;
			margin:0;
		}
		.recruitment h5{
			font-weight: 400;
			font-size: 12px;
			color: #999;
			margin:0;
		}
		.recruitment .recruit-heading{
			height: 34px;
			line-height: 34px;
			border-bottom:1px solid #ddd;
			margin-bottom: 10px;
		}
		.recruitment .recruit-heading .title{
			float:left;
		}
		.recruitment .recruit-heading .more{
			float:right;
		}
		.recruitment .recruit-heading .link{
			font-size: 12px;
			font-weight: bold;
		}
		.recruitment .recruit-body{
		}
		.recruitment .recruit-body li{
			outline: 0;
			padding:10px 0;
			width: 50%;
			/*width: -webkit-calc(50% - 4px);
			width: -moz-calc(50% - 4px);
			width: calc(50% - 4px);
			display:inline-block;*/
			height: 50px;
			margin:0;
			float: left;
		}
		.recruitment .recruit-body li .logo-img{
			float: left;
			width: 44px;
			height: 44px;
			display: inline-block;
			padding: 2px;
			border:1px solid #ccc;
		}
		.recruitment .recruit-body li .logo-img img{
			width: 44px;
			height: 44px;
		}
		.recruitment .recruit-body li .logo-img span{
			display: block;
			font-weight: 700;
			height: 44px;
			line-height: 44px;
			font-size: 20px;
			text-align: center;
			border-radius: 5px;
		}
		.recruitment .recruit-body li .info-list{
			margin-left:60px;
		}
		.recruitment .recruit-body li .info-list div{
			line-height: 30px;
		}
		.recruitment .recruit-body li .info-list div a{
			margin-right:10px;
		}
		.recruitment .recruit-body li .info-list small{
			color: #666;
		}
		.recruitment .font-red{
			color: #EB6000 !important;
		}
		.recruitment-blog{
			margin-top:20px;
			border:1px solid #eee;
		}
		.recruitment-blog .recruit-heading{
			padding-top:10px;
			margin-left:20px;
			margin-right:20px;
		}
		.recruitment-blog .recruit-heading .title{
			font-size:16px;
		}
		.recruitment-blog .recruit-body{
			margin:0 20px;
		}
</style>
<!-------------------------------------------------------->
<script type="text/javascript">
    angular.module('blogComment', ['ngSanitize'])
	.directive('onFinishRender',function($timeout){
       return{
           restrict : 'A',
		   link:function(scope,element,attr){
               if(scope.$last){
				   $timeout(function(){
                       scope.$emit('ngRepeatFinished');
				   });
               }
		   }
       }
    })
    .controller('ListComment',function($scope, $http,$filter){
        var url = "/action/blog/listComment?blog=390486&page=1&size=10";
            $http({method: 'GET', url: url}).success(function(data) {
				$scope.commentjsons = data;
			});
            $scope.totalComment = 0;
            $scope.currentPage=1;
            $scope.pageSize=10;
            $scope.totalPage=Math.ceil($scope.totalComment/$scope.pageSize);
            if($scope.currentPage>3){
            	$scope.beginIndex = $scope.currentPage - 3;
            }else{
            	$scope.beginIndex = 1;
            }
            $scope.endIndex = $scope.beginIndex + 9;
            if($scope.endIndex>$scope.totalPage){
            	$scope.endIndex = $scope.totalPage;
            }
			var pages = new Array();
			var index=0;
			for(var i=$scope.beginIndex;i<=$scope.endIndex;i++){
				pages[index]=i;
				index++;
			}
			$scope.pages = pages;
            $scope.delete_c = function(nid,uid,cid){
                delete_c(nid,uid,cid);
            };
                $scope.ReplyInline = function(blog,user,relpy){
            ReplyInline(blog,user,relpy);
            };

            $scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){
                var whref = window.location.href;
                if(whref && whref.indexOf('#')>0){
                    var goto = whref.substring(whref.indexOf('#'),whref.length);
                    if(goto && goto !== whref){window.location=goto;}
                }
            })
	});
</script>
<div class="SpaceList ng-scope" style="margin-top:20px;" ng-app="blogComment" ng-controller="ListComment">
<div class="BlogComments">
  <h2><a name="comments"></a>评论<em ng-bind="totalComment" class="ng-binding">0</em></h2>
  <ul id="BlogComments">
      <!-- ngRepeat: commentjson in commentjsons -->  </ul>
</div>

<ul class="pager">
<!-- ngIf: (currentPage>1) --><!-- ngIf: (beginIndex>1) --><!-- ngRepeat: page in pages --><!-- ngIf: (endIndex<totalPage) --><!-- ngIf: (currentPage<totalPage) --></ul>
</div>
<!-------------------------------------------------------->


<div id="inline_reply_editor" style="display:none;">
<div class="BlogCommentForm">
	<form id="form_inline_comment" action="http://my.oschina.net/action/blog/add_comment?blog=390486" method="POST">
	  <input type="hidden" id="inline_reply_id" name="reply_id" value="">
      <textarea name="content" id="ccom_content" style="width:650px;height:60px;" onkeydown="if((event.metaKey || event.ctrlKey)&amp;&amp;event.keyCode==13){$(&#39;#form_inline_comment&#39;).submit();}"></textarea><br>
	  <p>
		  <span style="float:right;">
    	  <input type="button" value="关闭" class="blg_submit_btn" id="btn_close_inline_reply" style="background: rgba(255,255,255,0);color: #555;">
    	  <input type="submit" value="回复" id="btn_comment" class="blg_submit_btn"> 
		  </span>
		  插入：
				<a href="javascript:;" onclick="javascript:insert_emotions(&#39;ccom_content&#39;,this);" class="blog_emotion">表情</a>
				<a href="javascript:insert_projects_c();" class="blog_soft">开源软件</a>
		 <span class="NoData" id="ficmp_msg" style="color:#F00"></span>
	  </p>
    </form>
</div>
</div>

<div class="SpaceList" style="margin-top:20px;">
  <a name="comments" id="postform"></a>
      <div class="BlogCommentForm">
        <form id="form_comment" action="http://my.oschina.net/action/blog/add_comment?blog=390486" method="POST">
        	<div class="comment_portrait">
        		<img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/portrait.gif" align="absmiddle" alt="YuMG" title="YuMG" class="LargePortrait">        	</div>
        	<div class="comment_form">
        		<textarea name="content" id="wmd-input" style="width:650px;height:80px;" placeholder=""></textarea>
				<p>
					<button type="submit" class="blg_submit_btn" style="float:right;">发表评论</button>
					插入：
					<a href="javascript:insert_emotions();" class="blog_emotion">表情</a>
					<a href="javascript:insert_projects();" class="blog_soft">开源软件</a>
					<span class="NoData" id="cmt_tip"></span>
				</p>
				<div id="TweetFormPopupWraper">
					<div id="TweetFormPopupArrow">
        				<div id="TweetFormPopup">
                        	<div id="TweetEmotions">
                            	<div class="TweetPopupTitle"><a href="javascript:;" onclick="$(&#39;#TweetFormPopupWraper&#39;).hide();return false;">关闭</a>插入表情</div>
                            	                            	<a href="javascript:;" onclick="return ins_e(0);" class="emotion" style="background-position: -0px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(1);" class="emotion" style="background-position: -24px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(2);" class="emotion" style="background-position: -48px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(3);" class="emotion" style="background-position: -72px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(4);" class="emotion" style="background-position: -96px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(5);" class="emotion" style="background-position: -120px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(6);" class="emotion" style="background-position: -144px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(7);" class="emotion" style="background-position: -168px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(8);" class="emotion" style="background-position: -192px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(9);" class="emotion" style="background-position: -216px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(10);" class="emotion" style="background-position: -240px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(11);" class="emotion" style="background-position: -264px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(12);" class="emotion" style="background-position: -288px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(13);" class="emotion" style="background-position: -312px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(14);" class="emotion" style="background-position: -336px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(15);" class="emotion" style="background-position: -360px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(16);" class="emotion" style="background-position: -384px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(17);" class="emotion" style="background-position: -408px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(18);" class="emotion" style="background-position: -432px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(19);" class="emotion" style="background-position: -456px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(20);" class="emotion" style="background-position: -480px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(21);" class="emotion" style="background-position: -504px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(22);" class="emotion" style="background-position: -528px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(23);" class="emotion" style="background-position: -552px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(24);" class="emotion" style="background-position: -576px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(25);" class="emotion" style="background-position: -600px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(26);" class="emotion" style="background-position: -624px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(27);" class="emotion" style="background-position: -648px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(28);" class="emotion" style="background-position: -672px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(29);" class="emotion" style="background-position: -696px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(30);" class="emotion" style="background-position: -720px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(31);" class="emotion" style="background-position: -744px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(32);" class="emotion" style="background-position: -768px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(33);" class="emotion" style="background-position: -792px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(34);" class="emotion" style="background-position: -816px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(35);" class="emotion" style="background-position: -840px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(36);" class="emotion" style="background-position: -864px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(37);" class="emotion" style="background-position: -888px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(38);" class="emotion" style="background-position: -912px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(39);" class="emotion" style="background-position: -936px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(40);" class="emotion" style="background-position: -960px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(41);" class="emotion" style="background-position: -984px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(42);" class="emotion" style="background-position: -1008px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(43);" class="emotion" style="background-position: -1032px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(44);" class="emotion" style="background-position: -1056px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(45);" class="emotion" style="background-position: -1080px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(46);" class="emotion" style="background-position: -1104px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(47);" class="emotion" style="background-position: -1128px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(48);" class="emotion" style="background-position: -1152px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(49);" class="emotion" style="background-position: -1176px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(50);" class="emotion" style="background-position: -1200px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(51);" class="emotion" style="background-position: -1224px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(52);" class="emotion" style="background-position: -1248px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(53);" class="emotion" style="background-position: -1272px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(54);" class="emotion" style="background-position: -1296px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(55);" class="emotion" style="background-position: -1320px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(56);" class="emotion" style="background-position: -1344px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(57);" class="emotion" style="background-position: -1368px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(58);" class="emotion" style="background-position: -1392px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(59);" class="emotion" style="background-position: -1416px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(60);" class="emotion" style="background-position: -1440px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(61);" class="emotion" style="background-position: -1464px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(62);" class="emotion" style="background-position: -1488px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(63);" class="emotion" style="background-position: -1512px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(64);" class="emotion" style="background-position: -1536px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(65);" class="emotion" style="background-position: -1560px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(66);" class="emotion" style="background-position: -1584px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(67);" class="emotion" style="background-position: -1608px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(68);" class="emotion" style="background-position: -1632px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(69);" class="emotion" style="background-position: -1656px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(70);" class="emotion" style="background-position: -1680px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(71);" class="emotion" style="background-position: -1704px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(72);" class="emotion" style="background-position: -1728px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(73);" class="emotion" style="background-position: -1752px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(74);" class="emotion" style="background-position: -1776px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(75);" class="emotion" style="background-position: -1800px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(76);" class="emotion" style="background-position: -1824px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(77);" class="emotion" style="background-position: -1848px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(78);" class="emotion" style="background-position: -1872px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(79);" class="emotion" style="background-position: -1896px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(80);" class="emotion" style="background-position: -1920px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(81);" class="emotion" style="background-position: -1944px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(82);" class="emotion" style="background-position: -1968px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(83);" class="emotion" style="background-position: -1992px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(84);" class="emotion" style="background-position: -2016px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(85);" class="emotion" style="background-position: -2040px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(86);" class="emotion" style="background-position: -2064px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(87);" class="emotion" style="background-position: -2088px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(88);" class="emotion" style="background-position: -2112px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(89);" class="emotion" style="background-position: -2136px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(90);" class="emotion" style="background-position: -2160px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(91);" class="emotion" style="background-position: -2184px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(92);" class="emotion" style="background-position: -2208px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(93);" class="emotion" style="background-position: -2232px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(94);" class="emotion" style="background-position: -2256px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(95);" class="emotion" style="background-position: -2280px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(96);" class="emotion" style="background-position: -2304px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(97);" class="emotion" style="background-position: -2328px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(98);" class="emotion" style="background-position: -2352px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(99);" class="emotion" style="background-position: -2376px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(100);" class="emotion" style="background-position: -2400px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(101);" class="emotion" style="background-position: -2424px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(102);" class="emotion" style="background-position: -2448px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(103);" class="emotion" style="background-position: -2472px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(104);" class="emotion" style="background-position: -2496px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(105);" class="emotion" style="background-position: -2520px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(106);" class="emotion" style="background-position: -2544px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(107);" class="emotion" style="background-position: -2568px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(108);" class="emotion" style="background-position: -2592px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(109);" class="emotion" style="background-position: -2616px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(110);" class="emotion" style="background-position: -2640px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(111);" class="emotion" style="background-position: -2664px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(112);" class="emotion" style="background-position: -2688px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(113);" class="emotion" style="background-position: -2712px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(114);" class="emotion" style="background-position: -2736px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(115);" class="emotion" style="background-position: -2760px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(116);" class="emotion" style="background-position: -2784px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(117);" class="emotion" style="background-position: -2808px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(118);" class="emotion" style="background-position: -2832px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(119);" class="emotion" style="background-position: -2856px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(120);" class="emotion" style="background-position: -2880px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(121);" class="emotion" style="background-position: -2904px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(122);" class="emotion" style="background-position: -2928px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(123);" class="emotion" style="background-position: -2952px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(124);" class="emotion" style="background-position: -2976px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(125);" class="emotion" style="background-position: -3000px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(126);" class="emotion" style="background-position: -3024px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(127);" class="emotion" style="background-position: -3048px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(128);" class="emotion" style="background-position: -3072px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(129);" class="emotion" style="background-position: -3096px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(130);" class="emotion" style="background-position: -3120px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(131);" class="emotion" style="background-position: -3144px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(132);" class="emotion" style="background-position: -3168px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(133);" class="emotion" style="background-position: -3192px 0px;"></a>
                            	                            	<a href="javascript:;" onclick="return ins_e(134);" class="emotion" style="background-position: -3216px 0px;"></a>
                            	                            	<div class="clear"></div>
                        	</div>
        				</div>
					</div>
				</div>
            </div>
        </form>
    </div>
  </div>
<div id="RelativeBlogs">
	<strong><a id="btn_close">关闭</a>相关文章阅读</strong>
	<ul>
			<li>
		<span class="date">2015/03/13</span>
		<a href="http://my.oschina.net/yumg/blog/386864" title="Spring Integration 中文手册 (0)">Spring Integration 中文手册 (0)...</a>
	</li>
				<li>
		<span class="date">2015/03/16</span>
		<a href="http://my.oschina.net/yumg/blog/387701" title="Spring Integration 中文手册 (1)">Spring Integration 中文手册 (1)...</a>
	</li>
				<li>
		<span class="date">2014/10/12</span>
		<a href="http://my.oschina.net/pangzhuzhu/blog/327159" title=" 关于某大型企业应用集成现状的思考 "> 关于某大型企业应用集成现状的思考 </a>
	</li>
				<li>
		<span class="date">2012/03/09</span>
		<a href="http://my.oschina.net/chen106106/blog/47561" title="EAI Bridges简介">EAI Bridges简介</a>
	</li>
				<li>
		<span class="date">2012/03/09</span>
		<a href="http://my.oschina.net/chen106106/blog/47778" title="Service Bus EAI &amp; EDI 实验室发布了">Service Bus EAI &amp; EDI 实验室发...</a>
	</li>
			</ul>
</div>
<script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/blog(1)" defer="defer"></script>

<script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/xregexp-min.js"></script>
<script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/shCore.min.js"></script>
<script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/shAutoloader.js"></script>
<link type="text/css" rel="stylesheet" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/shCore.css">
<link type="text/css" rel="Stylesheet" href="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/shThemeDefault.css">

<script type="text/javascript">
    SyntaxHighlighter.autoloader(
            'applescript			/js/sh309/scripts/shBrushAppleScript.js?t=1451964199000',
            'actionscript3 as3		/js/sh309/scripts/shBrushAS3.js?t=1451964199000',
            'bash shell				/js/sh309/scripts/shBrushBash.js?t=1451964199000',
            'coldfusion cf			/js/sh309/scripts/shBrushColdFusion.js?t=1451964199000',
            'cpp c					/js/sh309/scripts/shBrushCpp.js?t=1451964199000',
            'obj-c objc				/js/sh309/scripts/shBrushObjC.js?t=1451964199000',
            'c# c-sharp csharp		/js/sh309/scripts/shBrushCSharp.js?t=1451964199000',
            'css					/js/sh309/scripts/shBrushCss.js?t=1451964199000',
            'delphi pascal			/js/sh309/scripts/shBrushDelphi.js?t=1451964199000',
            'diff patch pas			/js/sh309/scripts/shBrushDiff.js?t=1451964199000',
            'erl erlang				/js/sh309/scripts/shBrushErlang.js?t=1451964199000',
            'groovy					/js/sh309/scripts/shBrushGroovy.js?t=1451964199000',
            'haxe hx				/js/sh309/scripts/shBrushHaxe.js?t=1451964199000',
            'java					/js/sh309/scripts/shBrushJava.js?t=1451964199000',
            'jfx javafx				/js/sh309/scripts/shBrushJavaFX.js?t=1451964199000',
            'js jscript javascript	/js/sh309/scripts/shBrushJScript.js?t=1451964199000',
            'perl pl				/js/sh309/scripts/shBrushPerl.js?t=1451964199000',
            'php					/js/sh309/scripts/shBrushPhp.js?t=1451964199000',
            'text plain				/js/sh309/scripts/shBrushPlain.js?t=1451964199000',
            'py python				/js/sh309/scripts/shBrushPython.js?t=1451964199000',
            'ruby rails ror rb		/js/sh309/scripts/shBrushRuby.js?t=1451964199000',
            'scala					/js/sh309/scripts/shBrushScala.js?t=1451964199000',
            'sql					/js/sh309/scripts/shBrushSql.js?t=1451964199000',
            'vb vbnet				/js/sh309/scripts/shBrushVb.js?t=1451964199000',
            'xml xhtml xslt html	/js/sh309/scripts/shBrushXml.js?t=1451964199000'
    );
    SyntaxHighlighter.all();
</script>
<!--[if lt IE 7]>
<script type="text/javascript" src="/js/minmax.js?t=1451964199000"></script>
<![endif]-->
<script type="text/javascript">
<!--
var posting = false;
var upprev_closed = false;
var upprev_hidden = true;

$(document).ready(function(){
				
    $('.BlogContent img').css('cursor','pointer');
    jQuery.each($('.BlogContent img'),function(idx,v){
    	$(v).wrap("<a href='"+$(this).attr('src')+"' target='_blank'></a>");
    });
	$('#form_comment').ajaxForm({
		dataType: 'json',
		bforeSubmit: function(){
			posting = true;
		},
		success: function(json) {
        	if(json.msg){
				///alert(json.msg);
				$('#cmt_tip').html("<span style='color:#C00;'>"+json.msg+"</span>");
				$('#wmd-input').focus();
			}else{
				var url = "http://my.oschina.net/yumg/blog_post?_cmt_blog="+json.blog+"&_cmt_user="+json.user+"&_cmt_id="+json.id;
        		jQuery.get(url, function(data){
    				$('#form_comment .NoData').hide();
        			$('ul#BlogComments').append(data);
        			$('#form_comment').resetForm();
        		});
			}
		}
	});

    var at_datas = [];
    $('img.SmallPortrait').each(function(){
        var name = $(this).attr('alt');
        if(jQuery.inArray(name, at_datas) < 0 && name != '${g_user.name}')
            at_datas.push(name);
    });
    $("#form_comment textarea").atWho("@", {data: at_datas});
	$("#form_comment textarea").on("keydown",function(event){
		if((event.metaKey || event.ctrlKey) && event.keyCode==13){
			$("#form_comment").submit();
		}
	});
	$("#submiting").ajaxStart(function(){
	   if(posting){
    	   $('#btn_submit').attr("disabled","disabled");
           $(this).show();
	   }
    });
	$("#submiting").ajaxComplete(function(event,request, settings){
	   if(posting){
           $(this).hide();
    	   $('#btn_submit').attr("disabled","");
	   }
	   posting = false;
    });

    $(window).scroll(function() {
        var lastScreen;
        if ($("#postform").length > 0)
            lastScreen = getScrollY() + $(window).height() < $("#postform").offset().top * 1 ? false : true;
        else
            lastScreen = getScrollY() + $(window).height() < $(document).height() * 1 ? false : true;
        if (lastScreen && !upprev_closed) {
            $("#RelativeBlogs").stop().animate({right:"0px"});
            upprev_hidden = false;
        }
        else if (upprev_closed && getScrollY() == 0) {
            upprev_closed = false;
        }
        else if (!upprev_hidden) {
            upprev_hidden = true;
            $("#RelativeBlogs").stop().animate({right:"-400px"});
        }
    });
    $("#RelativeBlogs #btn_close").click(function() {
        $("#RelativeBlogs").stop().animate({right:"-400px"});
        upprev_closed = true;
        upprev_hidden = true;
    });
});
function delete_c(nid,uid,cid){
  if(confirm("您确认要删除此篇评论？")){
    var args = "cmt="+cid+"#"+uid+"#"+nid;
    ajax_post("/action/blog/delete_blog_comments?space=2321188",args,function(){$("#cmt_"+nid+"_"+uid+"_"+cid).fadeOut();});
  }
}
var replyinline_dup = false;
function ReplyInline(blog,user,reply){
	$('.inline_reply').empty();
	var div_id = '#inline_reply_of_'+blog+'_'+user+'_'+reply;
	$('#inline_reply_id').val(user+'_'+reply);
	$(div_id).html($('#inline_reply_editor').html());
	$('#ccom_content').focus();
	$('#btn_close_inline_reply').click(function(){
		$(div_id).empty();
	});
	var li_id = '#cmt_'+blog+'_'+user+'_'+reply;
	var p_li = $(li_id);
	var tip = $("#ficmp_msg");
	$('#form_inline_comment').ajaxForm({
		dataType: 'json',
		beforeSubmit:function(){
			if(replyinline_dup){
			    tip.html("正在发表评论，请勿重复提交");
				return false;
			}
			replyinline_dup = true;
			return true;
		},
    	success: function(json) {
			tip.html("");
        	if(json.msg){
				tip.html(json.msg);
				replyinline_dup = false;
        	}
        	else if(json.id){
    			ajax_post("http://my.oschina.net/blog/show_post","_cmt_user="+"&_cmt_id="+json.id,function(html){
					if(html.length > 0){
						$(html).insertAfter(p_li);
						$(div_id).empty();
					}else{
						tip.html("获取评论失败");
					}
					setTimeout(function(){
    					replyinline_dup = false;
					},5000)
				});
        	}
    	}
	});
}
function edit_catalogs(qid){
	popup("/set-catalogs?parent=1&type=3&id="+qid);
}
function vote(blogid){
		alert("必须登录后才能操作 :)");
	}
function toggle_recomm(blogid){
	ajax_post("/action/blog/toggle_recomm","id="+blogid,function(html){
		if(html == '-1')
			alert("文章不存在");
		else if(html == 0){
			$('#lnk_recomm_'+blogid).removeClass('recommend');
			$('#lnk_recomm_'+blogid).text("未推荐");
		}
		else if(html == 1){
			$('#lnk_recomm_'+blogid).addClass('recommend');
			$('#lnk_recomm_'+blogid).text("已推荐");
		}
	});
}
	var textbox = $("#wmd-input").textbox({
		maxLength: 1000,
    	onInput: function(event, status) {
			var txt = jQuery.trim($("#wmd-input").val());
    	}
	});
	function insert_projects() {
		textbox.insertText('#此处输入软件名#');
		$('#TweetEmotions').removeAttr('txt_id');
	}
	function insert_projects_c() {
    	var combox = $("#ccom_content").textbox({
    		maxLength: 1000,
        	onInput: function(event, status) {
    			var txt = jQuery.trim($("#ccom_content").val());
        	}
    	});
		combox.insertText('#此处输入软件名#');
		$('#TweetEmotions').removeAttr('txt_id');
	}
	function insert_emotions(id,obj) {
		if(id) {
			$('#TweetEmotions').attr('txt_id',id);
			var thiz = $(obj);
			var offset = thiz.offset();
			var poffset = thiz.offsetParent().offset();
        	var left = offset.left-poffset.left;
        	var top = offset.top-poffset.top;
			$('#TweetFormPopupWraper').css({'top':top+25 +'px','left':left+'px'});
		}
		else {
			$('#TweetFormPopupWraper').css({'top':'','left':''});
			$('#TweetEmotions').removeAttr('txt_id');
		}
		$('#TweetEmotions').show();
		$('#TweetImages').hide();
		$('#TweetFormPopupArrow').removeClass('projects');
		$('#TweetFormPopupArrow').removeClass('images');
		$('#TweetFormPopupArrow').addClass('emotions');
		$('#TweetFormPopupWraper').slideDown('fast');
	}
	function ins_e(idx){
		var txt_id = $('#TweetEmotions').attr('txt_id');
		if(!txt_id)
			textbox.insertText('['+idx+']');
		else {
			insertAtCursor(txt_id,'['+idx+']');
		}
		$('#TweetFormPopupWraper').hide();
		return false;
	}
	function insertAtCursor(tbid,str) {
		var tb = document.getElementById(tbid);
        if (document.selection){
			tb.focus();
			var r = document.selection.createRange();
            document.selection.empty();
            r.text = str;
            r.collapse();
            r.select();
        }
        else{
            var newstart = tb.selectionStart+str.length;
            tb.value=tb.value.substr(0,tb.selectionStart)+str+tb.value.substring(tb.selectionEnd);
            tb.selectionStart = newstart;
            tb.selectionEnd = newstart;
        }
	}
//-->
</script>                </div>
	<div class="clear"></div>
	<div id="OSC_Footer"><style>
.oscapp {text-align:left; width:220px;}
.oscapp span {float:left;width:140px;}
.oscapp a {float:left;text-indent:-9999em;width:16px;margin-left:8px;}
.oscapp a.android {background:url('/img/android.gif') no-repeat left center;}
.oscapp a.iphone {background:url('/img/iphone.gif') no-repeat left center;}
.oscapp a.wp7 {background:url('/img/wp7.gif') no-repeat left center;}
</style>
<table width="100%"><tbody><tr>
<td align="left">© 开源中国(OSChina.NET) | <a href="http://www.oschina.net/home/aboutosc">关于我们</a> | <a href="mailto:market@oschina.cn">广告联系</a> | <a href="http://weibo.com/oschina2010" target="_blank">@新浪微博</a> | <a href="http://m.oschina.net/">开源中国手机版</a> | <a href="http://www.miitbeian.gov.cn/" target="_blank" style="color:#737573;text-decoration:none;">粤ICP备12009483号-3</a></td>
<td class="oscapp">
	<span>开源中国手机客户端：</span>
	<a href="http://www.oschina.net/app" class="android" title="Android客户端">Android</a>
	<a href="http://www.oschina.net/app" class="iphone" title="iPhone 客户端">iPhone</a>
	<a href="http://www.oschina.net/app" class="wp7" title="Windows Phone 客户端">WP7</a>
</td>
</tr>
<tr>
<td colspan="2" align="left">开源中国社区(OSChina.net)是工信部 <a href="http://www.copu.org.cn/" target="_blank">开源软件推进联盟</a> 指定的官方社区</td>
</tr>
</tbody></table>
<script type="text/javascript">
<!--
if (top.location != self.location)top.location=self.location;
//-->
</script></div>
</div>

<style>
span.love{
	position: relative;
    min-width: 35px;
    display: inline-block;
    height: 12px;
}
span.love a{
    position: absolute;
    right: 0px;
}
</style>
<script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/space"></script>
<script type="text/javascript" src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/ImageTool.js"></script>
<script type="text/javascript">
<!--
$(document).ready(function() {

	SelectStyle("#search-item",".search_list");
	$('.Tweet .photo img').live("click",function(){
		var T=$(this);
		var t=this;
		var bigImg = T.attr('bi');
		var smallImg = T.attr('si');
		var src = T.attr('src');
		var newsrc = (bigImg == src)?smallImg:bigImg;
		var imgId = T.attr('id');
		if(T.parent().attr("id") == "img_container"){
			T.parent().replaceWith(T);
			T.removeAttr("style");
			T.removeAttr("width");
			T.removeAttr("height");
		}
		if(newsrc == bigImg){
    		var loading=$('<img alt="loading" src="/img/loading.gif?t=1451964198000"/>');
			var top = T.position().top+T.height()/2-8;
			var left = T.position().left+T.width()/2-8;
			loading.css({
				'position':'absolute',
				'z-index':999,
				'top':top,
				'left':left
			});
    		T.before(loading);
			var tImg=new Image();
			tImg.src=newsrc;
			tImg.onload=function(){afterImgLoad(T,loading,imgId,newsrc,bigImg);};
		}
		else{
			T.attr("src",newsrc);
			$('#img_menu_'+imgId).remove();
		}
		return false;
	});
	
	$(".tweet_thumb_wrapper").mouseenter(function(){
		$(this).find(".tweet_play_video").css("opacity",1);
	}).mouseleave(function(){
		$(this).find(".tweet_play_video").css("opacity",0.7);
	});

    $("#TForm textarea").atWho("@", function(query, callback){
        jQuery.ajax({
            type:'POST',
            url:"/action/tweet/at_suggest",
            data:{'q':query},
            dataType:'json',
            success:function(json){
                callback(json);
            }
        });
    });
	
	toggle_tweet_video = function(id){
		$("#tweet_video_thumb_"+id).toggle();
		var video = $("#tweet_video_"+id).toggle();
		video.siblings(".tweet_video_operation,.tweet_thumb_wrapper").toggle();
	};
	
	function afterImgLoad(T,loading,imgId,url,bigImg){
		var lnks = "<div id='img_menu_"+imgId+"' class='ImgMenu'>";
		lnks += "<a href='#' onclick='$(\"#"+imgId+"\").click();return false;'>收起</a>";
		lnks += "<a href='javascript:void(0);' onclick='rotate(this,\""+imgId+"\",0);' id='rotate_btn'>旋转</a>";
		lnks += "<a href='"+bigImg+"' target='_blank'>查看原图</a></div>";			
		loading.remove();
		T.attr("src",url);
		T.before(lnks);
	}
});

function set_fellow_memo(fid,fname){
	popup("/action/ajax/set_fellow_memo","friend="+fid+"&name="+fname);
}

function deleteMsgs(uid, fid, fname){
	if(!confirm("你确认要清除与‘"+fname+"’的所有私信吗？"))
		return ;
	var args = "user="+uid+"&friend="+fid;
	ajax_post("/action/msg/delete_user",args,function(html){
		if(html.length > 0)
			alert(html);
		else{
			$('#Msg_'+fid).fadeOut();
		}
	});
}

function follow_user(uid, uname){
	just_follow(uid, uname,'${g_user.id}'); //oschina.js
}

function unfollow_user(uid, uname){
	if(confirm("确定不再关注" + uname + "了吗？"))
	just_unfollow(uid,'${g_user.id}',function(){
		alert('已取消对 ' + uname + ' 的关注');
	});
}

function tweet_reply(logid){
	var r = $('#LogReply_'+logid);
	if(!r.is(":hidden")){
		close_tweet_reply(logid);
		return ;
	}
	r.html("<div class='TweetRplsWrapper'><span class='loading'>正在加载评论，请稍候...</span></div>")
	r.show();
	r.load("http://my.oschina.net/yumg/tweet-rpls?log="+logid,function(){
		$('#edt_tweet_post_'+logid).focus();
        var at_datas = [];
        $(this).find("img.SmallPortrait").each(function(){
            var name = $(this).attr('alt');
            if(jQuery.inArray(name, at_datas) < 0 && name != '${g_user.name}')
                at_datas.push(name);
        });
        $(this).find("input.TXT_TweetRpl_Text").atWho("@", {data: at_datas});
        $('#TweetReplyForm_'+logid).ajaxForm({
        	dataType: 'json',
			beforeSubmit: function(arr, form, options){
				$('#BTN_TweetReply_'+logid).attr('disabled','disabled');
			},
            success: function(json) {
            	if(json.msg){
        			alert(json.msg);
            	}else if(json.log){
					$('#log_reply_count_'+logid).text(json.reply_count);
        			//插入新评论					
					ajax_get("/action/ajax/get_tweet_reply?id=" + json.log,true,function(html){
						$('#LogReply_'+logid+' ul').prepend(html);
					});
					$('#edt_tweet_post_'+logid).val('');
            	}
				$('#BTN_TweetReply_'+logid).removeAttr('disabled');
            }
        });
	});
}
function close_tweet_reply(logid){
	$('#LogReply_'+logid).empty();
	$('#LogReply_'+logid).hide();
	$('#Logs .userlogs li').removeClass('hover');
}
function reply_rtweet(logid, rid, toname){
	var edtPost = $('#edt_tweet_post_' + logid);
	var old_v = edtPost.val();
	if(old_v.length > 0)
		edtPost.val(old_v + ',@'+toname+' ');
	else
		edtPost.val('回复 @'+toname+' : ');
	edtPost.focus();
	edtPost.caretPos(edtPost.val().length); }
function delete_tweet(logid){
	if(confirm("确认要删除这条信息吗？"))
	ajax_post("/action/tweet/delete?log="+logid+"&user=${g_user.id}","",function(html){
		if(html.length==0){
			var elem = $('#LI_'+logid);
			if(elem.length > 0)
				$('#LI_'+logid).fadeOut();
			else
				location.reload();
		}
	});
}
function delete_tweet_reply(logid){
	if(confirm("确认要删除这条评论吗？"))
	ajax_post("/action/tweet/delete_reply?id="+logid+"&user=${g_user.id}","",function(html){
		if(html.length > 0)
			$('#LI_'+logid).fadeOut();
	});
}

function delete_blog(blog_id){
    if(!confirm("文章删除后无法恢复，请确认是否删除此篇文章？")) return;
    ajax_post("/action/blog/delete?id="+blog_id+"&user=${g_user.id}&user_code=${g_user.activate_code}","",function(html){
    	location.href="http://my.oschina.net/yumg/blog";
    });
}

function SelectStyle(on,option){
	var currentSort = $(on).attr('id');
	var currentText = $(option+" li."+currentSort+" a").html();
	$(on + " .text").html(currentText);
	$(on + " .text").hover(function(){
		$(this).addClass("hover")
	},function(){
		$(this).removeClass("hover")
	});
	$(option+" li a").each(function(index){
		$(this).click(function(){
			thishtml = $(this).html();
			$(on + " .text").removeClass("on").html(thishtml);		
			$(".selectbox select ").find("option").removeAttr('selected').eq(index).attr("selected","selected");	
			$(option).hide()
			return false;
		});
		
	});		
	
	$(".selectbox").click(function(){		
		$(option).toggle();
		$(on + " .text").toggleClass("on");		
		return false;
	});
	$(document).click(function(){
		$(option).hide();	
		$(on + " .text").removeClass("on");
	});
	$(document).trigger('click');

}

//-->
//添加点赞脚本开始
function makeAsLove(obj){

	var _this = $(obj);
	var _hc = _this.hasClass('fa-thumbs-o-up');
	
	var _enable = _this.attr('data-click');
	if (_enable != undefined && 'dis' === _enable) {
	    return;
	}

	var makeAsLoveId =$(obj).attr("id");
	var temp = makeAsLoveId.split("_");
	var logid = temp[1];
	var ownerOfLog = temp[2];
	var clickCount = $("#love_"+logid+"_hidden_clickCount").val();
	var user_code = $("#love_"+logid+"_user_code").val();
	var current_love_count = $("#love_"+logid+"_hidden").val();
	$("#love_userlist_"+logid+"_hidden").val();
	
	_this.animate({
            'font-size': '20px'
        },300, function () {
            _this.attr('data-click', 'dis');
            setTimeout(function(){
                _this.attr('data-click', 'enable');
            },1000);
            setTimeout(function () {
                if (_hc) {
                    _this.removeClass('fa-thumbs-o-up');
                    _this.addClass('fa-thumbs-up');
                } else {
                    _this.removeClass('fa-thumbs-up');
                    _this.addClass('fa-thumbs-o-up');
                }
                _this.css({
                    'font-size': '14px'
                });

              $.ajax({
		            url:"/action/tweet/makeAsLove",
		            type:"POST",
		            data:{
		                logid:logid,
		                user_code:user_code,
		                current_love_count:current_love_count,
		                ownerOfLog:ownerOfLog,
		                clickCount:clickCount
		            },
		            success:function(result){
		                var dataResult =  jQuery.parseJSON(result)
		                var resultCode = dataResult.code;
		                $("#love_"+logid+"_hidden_clickCount").val(parseInt(dataResult.clickCount));
		                if(resultCode=="200"){
		                    var love = dataResult.love_count;
		                    var countOfLove = parseInt(love);
		                    $("#love_"+logid).text(countOfLove);
		                    $("#love_userlist_"+logid).text(countOfLove);
		                    var imgEle = '<a href="$link.auto_user($g_user, false)" target="_blank" id="me_'+logid+'">';
							var spanEle = '<span class="TweetUserPic"><img src="/img/portrait.gif?t=1451964198000" align="absmiddle" alt="非会员用户" title="非会员用户" class="SmallPortrait" user=""/></span></a>';
		                    $("#user_pic_"+logid).prepend(imgEle+spanEle);
		                    $("#love_"+logid).text(countOfLove);
		                    $("#love_"+logid+"_hidden").val(countOfLove);
		                    $("#love_userlist_"+logid+"hidden").val(countOfLove);
		                    $("#love_userlist_"+logid).text(countOfLove+"个人觉得很赞");
		                    //$("#"+makeAsLoveId).attr("class","loved");
		                    return;
		                }
		                if(resultCode=="201"){
		                	var love = dataResult.love_count;
			                var countOfLove = parseInt(love);
			                $("#love_userlist_"+logid).text(countOfLove);
		                    $("#me_"+logid).empty();
		                    $("#love_"+logid).text(countOfLove);
		                    $("#love_"+logid+"_hidden").val(countOfLove);
		                    if(countOfLove<=0){
		                    	$("#love_userlist_"+logid).text("");
		                    }else{
		                    	$("#love_userlist_"+logid).text(countOfLove+"个人觉得很赞");
		                    }
		                    //$("#"+makeAsLoveId).removeClass("loved");
		                    return;
		                }
		                $("#" + makeAsLoveId).attr("class", "fa fa-thumbs-o-up");
		                $("#info_"+logid).text(dataResult.result);
		                setTimeout(function(){
		                	$("#info_"+logid).text("");
		                },3000);
		            }

            }, 400);
        });
	
        });
}
</script>

<script>
	function toggle(){
		var flag= $("#hiddenflag").val();
		if(flag=="true"){
			$(".hiddenPic").hide();
			$("#hiddenflag").val(false);
		}else if(flag=="false"){
			$(".hiddenPic").show();
			$("#hiddenflag").val(true);
		}
	}
</script>


<!-- Generated by OsChina.NET (init:0[ms],page:64[ms],ip:202.105.41.197) --><div id="fancybox-tmp"></div><div id="fancybox-loading"><div></div></div><div id="fancybox-overlay"></div><div id="fancybox-wrap"><div id="fancybox-outer"><div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div><div id="fancybox-content"></div><a id="fancybox-close"></a><div id="fancybox-title"></div><a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a><a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a></div></div><div id="topcontrol" title="回到顶部" style="position: fixed; bottom: 165px; right: 100px; display: none; cursor: pointer;"><img src="./Spring Integration 中文手册 (2) - YuMG的个人页面 - 开源中国社区_files/gotop.gif" style="width:31px; height:31px;"></div><div id="at-view" class="at-view"><ul id="at-view-ul"></ul></div></body></html>